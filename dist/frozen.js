//>>built
(function(b,e){var g,j,h,d=function(){},k=function(o){for(var a in o)return 0;return 1},i={}.toString,l=function(o){return"[object Function]"==i.call(o)},a=function(o){return"[object String]"==i.call(o)},n=function(o){return"[object Array]"==i.call(o)},c=function(o,a){if(o)for(var c=0;c<o.length;)a(o[c++])},f=function(o,a){for(var c in a)o[c]=a[c];return o},p=function(o,a){return f(Error(o),{src:"dojoLoader",info:a})},z=1,w=function(){return"_"+z++},m=function(o,a,c){return na(o,a,c,0,m)},H=this,
C=H.document,L=C&&C.createElement("DiV"),t=m.has=function(o){return l(q[o])?q[o]=q[o](H,C,L):q[o]},q=t.cache=e.hasCache;t.add=function(o,a,c,f){(void 0===q[o]||f)&&(q[o]=a);return c&&t(o)};for(var u in b.has)t.add(u,b.has[u],0,1);m.async=1;var x=new Function("return eval(arguments[0]);");m.eval=function(a,c){return x(a+"\r\n////@ sourceURL="+c)};var F={},y=m.signal=function(a,f){var b=F[a];c(b&&b.slice(0),function(a){a.apply(null,n(f)?f:[f])})},U=m.on=function(a,c){var f=F[a]||(F[a]=[]);f.push(c);
return{remove:function(){for(var a=0;a<f.length;a++)if(f[a]===c){f.splice(a,1);break}}}},oa=[],Aa={},pa=[],s={},A=m.map={},I=[],r={},D="",G={},Q={};u={};var M=function(a){var c,f,b,p;for(c in Q)f=Q[c],(b=c.match(/^url\:(.+)/))?G["url:"+qa(b[1],a)]=f:"*now"==c?p=f:"*noref"!=c&&(b=V(c,a),G[b.mid]=G["url:"+b.url]=f);p&&p(ba(a));Q={}},R=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},J=function(a,c){c.splice(0,c.length);for(var f in a)c.push([f,a[f],RegExp("^"+
R(f)+"(/|$)"),f.length]);c.sort(function(a,c){return c[3]-a[3]});return c},B=function(a){var c=a.name;c||(c=a,a={name:c});a=f({main:"main"},a);a.location=a.location?a.location:c;if(a.packageMap)A[c]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);s[c]=a},O=[],v=function(o,b,p){for(var d in o){if("waitSeconds"==d)m.waitms=1E3*(o[d]||0);"cacheBust"==d&&(D=o[d]?a(o[d])?o[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)m[d]=o[d];o[d]!==q&&(m.rawConfig[d]=o[d],"has"!=d&&t.add("config-"+
d,o[d],0,b))}if(!m.baseUrl)m.baseUrl="./";/\/$/.test(m.baseUrl)||(m.baseUrl+="/");for(d in o.has)t.add(d,o.has[d],0,b);c(o.packages,B);for(h in o.packagePaths)c(o.packagePaths[h],function(c){var o=h+"/"+c;a(c)&&(c={name:c});c.location=o;B(c)});J(f(A,o.map),I);c(I,function(a){a[1]=J(a[1],[]);if("*"==a[0])I.star=a});J(f(Aa,o.paths),pa);c(o.aliases,function(c){a(c[0])&&(c[0]=RegExp("^"+R(c[0])+"$"));oa.push(c)});if(b)O.push({config:o.config});else for(d in o.config)b=P(d,p),b.config=f(b.config||{},o.config[d]);
if(o.cache)M(),Q=o.cache,o.cache["*noref"]&&M();y("config",[o,m.rawConfig])};m.rawConfig={};v(e,1);v(b,1);v(u,1);var E=function(a){ca(function(){c(a.deps,ra)})},na=function(c,b,g,h,k){var i;if(a(c)){if((i=P(c,h,!0))&&i.executed)return i.result;throw p("undefinedModule",c);}n(c)||(v(c,0,h),c=b,b=g);if(n(c))if(c.length){for(var g="require*"+w(),j,e=[],z=0;z<c.length;)j=c[z++],e.push(P(j,h));i=f(W("",g,0,""),{injected:2,deps:e,def:b||d,require:h?h.require:m,gc:1});r[i.mid]=i;E(i);var l=T&&0!="sync";
ca(function(){da(i,l)});i.executed||N.push(i);X()}else b&&b();return k},ba=function(a){if(!a)return m;var c=a.require;if(!c)c=function(f,b,d){return na(f,b,d,a,c)},a.require=f(c,m),c.module=a,c.toUrl=function(c){return qa(c,a)},c.toAbsMid=function(c){return ea(c,a)};return c},N=[],Y=[],K={},Ca=function(a){a.injected=1;K[a.mid]=1;a.url&&(K[a.url]=a.pack||1);Ba()},Z=function(a){a.injected=2;delete K[a.mid];a.url&&delete K[a.url];k(K)&&Da()},Ea=m.idle=function(){return!Y.length&&k(K)&&!N.length&&!T},
fa=function(a,c){if(c)for(var f=0;f<c.length;f++)if(c[f][2].test(a))return c[f];return 0},sa=function(a){for(var c=[],f,b,a=a.replace(/\\/g,"/").split("/");a.length;)f=a.shift(),".."==f&&c.length&&".."!=b?(c.pop(),b=c[c.length-1]):"."!=f&&c.push(b=f);return c.join("/")},W=function(a,c,f,b){return{pid:a,mid:c,pack:f,url:b,executed:0,def:0}},ta=function(a,f,b,d,h,i,k,j){var e,z,m,n;n=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||n&&!f)return W(0,a,0,a);a=sa(n?f.mid+"/../"+a:a);if(/^\./.test(a))throw p("irrationalPath",
a);f&&(m=fa(f.mid,i));(m=(m=m||i.star)&&fa(a,m[1]))&&(a=m[1]+a.substring(m[3]));f=(g=a.match(/^([^\/]+)(\/(.+))?$/))?g[1]:"";(e=b[f])?a=f+"/"+(z=g[3]||e.main):f="";var w=0;c(oa,function(c){var f=a.match(c[0]);f&&0<f.length&&(w=l(c[1])?a.replace(c[0],c[1]):c[1])});if(w)return ta(w,0,b,d,h,i,k,j);if(b=d[a])return j?W(b.pid,b.mid,b.pack,b.url):d[a];d=(m=fa(a,k))?m[1]+a.substring(m[3]):f?e.location+"/"+z:a;/(^\/)|(\:)/.test(d)||(d=h+d);return W(f,a,e,sa(d+".js"))},V=function(a,c){return ta(a,c,s,r,m.baseUrl,
I,pa)},ua=function(a,c,f){return a.normalize?a.normalize(c,function(a){return ea(a,f)}):ea(c,f)},va=0,P=function(a,c,f){var b,d;(b=a.match(/^(.+?)\!(.*)$/))?(d=P(b[1],c,f),5===d.executed&&!d.load&&ga(d),d.load?(b=ua(d,b[2],c),a=d.mid+"!"+(d.dynamic?++va+"!":"")+b):(b=b[2],a=d.mid+"!"+ ++va+"!waitingForPlugin"),a={plugin:d,mid:a,req:ba(c),prid:b}):a=V(a,c);return r[a.mid]||!f&&(r[a.mid]=a)},ea=m.toAbsMid=function(a,c){return V(a,c).mid},qa=m.toUrl=function(a,c){var f=V(a+"/x",c),b=f.url;return wa(0===
f.pid?a:b.substring(0,b.length-5))},xa={injected:2,executed:5,def:3,result:3},S=function(a){return r[a]=f({mid:a},xa)},Fa=S("require"),Ga=S("exports"),Ha=S("module"),$={},ha=0,ga=function(a){var c=a.result;a.dynamic=c.dynamic;a.normalize=c.normalize;a.load=c.load;return a},Ia=function(a){var b={};c(a.loadQ,function(c){var d=ua(a,c.prid,c.req.module),p=a.dynamic?c.mid.replace(/waitingForPlugin$/,d):a.mid+"!"+d,d=f(f({},c),{mid:p,prid:d,injected:0});r[p]||ya(r[p]=d);b[c.mid]=r[p];Z(c);delete r[c.mid]});
a.loadQ=0;var d=function(a){for(var c=a.deps||[],f=0;f<c.length;f++)(a=b[c[f].mid])&&(c[f]=a)},p;for(p in r)d(r[p]);c(N,d)},ia=function(a){m.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=ha++;a.loadQ&&(ga(a),Ia(a));for(j=0;j<N.length;)N[j]===a?N.splice(j,1):j++;/^require\*/.test(a.mid)&&delete r[a.mid]},Ja=[],da=function(a,c){if(4===a.executed)return m.trace("loader-circular-dependency",[Ja.concat(a.mid).join("->")]),!a.def||c?$:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return $;
var f=a.mid,b=a.deps||[],d,p=[],h=0;for(a.executed=4;h<b.length;){d=b[h++];d=d===Fa?ba(a):d===Ga?a.cjs.exports:d===Ha?a.cjs:da(d,c);if(d===$)return a.executed=0,m.trace("loader-exec-module",["abort",f]),$;p.push(d)}m.trace("loader-run-factory",[a.mid]);f=a.def;p=l(f)?f.apply(null,p):f;a.result=void 0===p&&a.cjs?a.cjs.exports:p;ia(a)}return a.result},T=0,ca=function(a){try{T++,a()}finally{T--}Ea()&&y("idle",[])},X=function(){T||ca(function(){for(var a,c,f=0;f<N.length;)a=ha,c=N[f],da(c),a!=ha?f=0:
f++})};void 0===t("dojo-loader-eval-hint-url")&&t.add("dojo-loader-eval-hint-url",1);var wa=function(a){a+="";return a+(D?(/\?/.test(a)?"&":"?")+D:"")},ya=function(a){var c=a.plugin;5===c.executed&&!c.load&&ga(c);var f=function(c){a.result=c;Z(a);ia(a);X()};c.load?c.load(a.prid,a.req,f):c.loadQ?c.loadQ.push(a):(c.loadQ=[a],N.unshift(c),ra(c))},aa=0,ja=0,ka=0,Ka=function(a,c){t("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));ka=1;a===aa?aa.call(null):m.eval(a,t("dojo-loader-eval-hint-url")?
c.url:c.mid);ka=0},ra=function(a){var c=a.mid,b=a.url;if(!a.executed&&!a.injected&&!(K[c]||a.url&&(a.pack&&K[a.url]===a.pack||1==K[a.url])))if(Ca(a),a.plugin)ya(a);else{var d=function(){La(a);2!==a.injected&&(Z(a),f(a,xa),m.trace("loader-define-nonmodule",[a.url]));X()};(aa=G[c]||G["url:"+a.url])?(m.trace("loader-inject",["cache",a.mid,b]),Ka(aa,a),d()):(m.trace("loader-inject",["script",a.mid,b]),ja=a,m.injectUrl(wa(b),d,a),ja=0)}},la=function(a,c,b){m.trace("loader-define-module",[a.mid,c]);if(2===
a.injected)return y("error",p("multipleDefine",a)),a;f(a,{deps:c,def:b,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(c){a.cjs.exports=c},config:function(){return a.config}}});for(var d=0;d<c.length;d++)c[d]=P(c[d],a);Z(a);if(!l(b)&&!c.length)a.result=b,ia(a);return a},La=function(a,f){for(var b=[],d,p;Y.length;)p=Y.shift(),f&&(p[0]=f.shift()),d=p[0]&&P(p[0])||a,b.push([d,p[1],p[2]]);M(a);c(b,function(a){E(la.apply(null,a))})},Da=d,Ba=d;t.add("ie-event-behavior",!!C.attachEvent&&
("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ma=function(a,c,f,b){if(t("ie-event-behavior"))return a.attachEvent(f,b),function(){a.detachEvent(f,b)};a.addEventListener(c,b,!1);return function(){a.removeEventListener(c,b,!1)}},Ma=ma(window,"load","onload",function(){m.pageLoaded=1;"complete"!=C.readyState&&(C.readyState="complete");Ma()}),za=C.getElementsByTagName("script")[0],Na=za.parentNode;m.injectUrl=function(a,c,f){var f=f.node=C.createElement("script"),b=ma(f,"load",
"onreadystatechange",function(a){var a=a||window.event,f=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(f.readyState))b(),d(),c&&c()}),d=ma(f,"error","onerror",function(c){b();d();y("error",p("scriptError",[a,c]))});f.type="text/javascript";f.charset="utf-8";f.src=a;Na.insertBefore(f,za);return f};m.log=d;m.trace=d;S=function(c,f,b){var d=arguments.length,h=["require","exports","module"],i=[0,c,f];1==d?i=[0,l(c)?h:[],c]:2==d&&a(c)?i=[c,l(f)?h:[],f]:3==d&&(i=[c,f,b]);m.trace("loader-define",
i.slice(0,2));if((d=i[0]&&P(i[0]))&&!K[d.mid])E(la(d,i[1],i[2]));else if(!t("ie-event-behavior")||ka)Y.push(i);else{d=d||ja;if(!d)for(c in K)if((h=r[c])&&h.node&&"interactive"===h.node.readyState){d=h;break}d?(M(d),E(la(d,i[1],i[2]))):y("error",p("ieDefineFailed",i[0]));X()}};S.amd={vendor:"dojotoolkit.org"};f(f(m,e.loaderPatch),b.loaderPatch);U("error",function(a){try{if(console.error(a),a instanceof Error)for(var c in a);}catch(f){}});f(m,{uid:w,cache:G,packs:s});if(!H.define)H.define=S,H.require=
m,c(O,function(a){v(a)}),U=u.deps||b.deps||e.deps,u=u.callback||b.callback||e.callback,m.boot=U||u?[U||[],u]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../frozen",main:"GameCore",name:"frozen"}]});
require({cache:{"dist/frozen":function(){define([],1)},"frozen/box2d/Box":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(b,e,g){var j=Box2D.Common.Math.b2Vec2,h=Box2D.Dynamics.b2BodyDef,d=Box2D.Dynamics.b2Body,k=Box2D.Dynamics.b2FixtureDef,i=Box2D.Dynamics.b2World,l=Box2D.Collision.Shapes.b2PolygonShape,a=Box2D.Collision.Shapes.b2CircleShape,n=Box2D.Dynamics.Joints.b2RevoluteJointDef;return b(e,{intervalRate:60,adaptive:!1,width:640,height:480,scale:30,bodiesMap:[],fixturesMap:[],
world:null,gravityX:0,gravityY:10,allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,constructor:function(a){if(a.intervalRate)this.intervalRate=parseInt(a.intervalRate,10);this.world=new i(new j(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(a){if(this.resolveCollisions)this.collisions={};var f=Date.now();a?this.world.Step(a/1E3,10,10):this.world.Step(this.adaptive?(f-this.lastTimestamp)/
1E3:1/this.intervalRate,10,10);this.world.ClearForces();return Date.now()-f},getState:function(){for(var a={},f=this.world.GetBodyList();f;f=f.m_next)if(f.IsActive()&&"undefined"!==typeof f.GetUserData()&&null!==f.GetUserData()&&(a[f.GetUserData()]={x:f.GetPosition().x,y:f.GetPosition().y,angle:f.GetAngle(),center:{x:f.GetWorldCenter().x,y:f.GetWorldCenter().y},linearVelocity:f.m_linearVelocity,angularVelocity:f.m_angularVelocity},this.resolveCollisions))a[f.GetUserData()].collisions=this.collisions[f.GetUserData()]||
null;return a},updateExternalState:function(a){var f=this.getState(),b;for(b in f){var d=a[b];d&&!d.staticBody&&d.update(f[b])}},setBodies:function(a){for(var f in a)this.addBody(a[f]);this.ready=!0},addBody:function(c){var f=new h,b=new k,i,g,e,n;b.restitution=c.restitution;b.density=c.density;b.friction=c.friction;f.type=c.staticBody?d.b2_staticBody:d.b2_dynamicBody;f.position.x=c.x;f.position.y=c.y;f.userData=c.id;f.angle=c.angle;f.linearDamping=c.linearDamping;f.angularDamping=c.angularDamping;
var C=this.world.CreateBody(f);if(c.radius)b.shape=new a(c.radius),C.CreateFixture(b);else if(c.points){g=[];for(f=0;f<c.points.length;f++)e=new j,e.Set(c.points[f].x,c.points[f].y),g[f]=e;b.shape=new l;b.shape.SetAsArray(g,g.length);C.CreateFixture(b)}else if(c.polys)for(i=0;i<c.polys.length;i++){g=c.polys[i];n=[];for(f=0;f<g.length;f++)e=new j,e.Set(g[f].x,g[f].y),n[f]=e;b.shape=new l;b.shape.SetAsArray(n,n.length);C.CreateFixture(b)}else b.shape=new l,b.shape.SetAsBox(c.halfWidth,c.halfHeight),
C.CreateFixture(b);this.bodiesMap[c.id]=C},setPosition:function(a,f,b){this.bodiesMap[a].SetPosition(new j(f,b))},setAngle:function(a,f){this.bodiesMap[a].SetAngle(f)},setLinearVelocity:function(a,f,b){this.bodiesMap[a].SetLinearVelocity(new j(f,b))},applyImpulseDegrees:function(a,f,b){a=this.bodiesMap[a];a.ApplyImpulse(new j(Math.sin(f*(Math.PI/180))*b,-1*Math.cos(f*(Math.PI/180))*b),a.GetWorldCenter())},applyForceDegrees:function(a,f,b){a=this.bodiesMap[a];a.ApplyForce(new j(Math.sin(f*(Math.PI/
180))*b,-1*Math.cos(f*(Math.PI/180))*b),a.GetWorldCenter())},applyImpulse:function(a,f,b){a=this.bodiesMap[a];a.ApplyImpulse(new j(Math.sin(f)*b,-1*Math.cos(f)*b),a.GetWorldCenter())},applyForce:function(a,b,d){a=this.bodiesMap[a];a.ApplyForce(new j(Math.sin(b)*d,-1*Math.cos(b)*d),a.GetWorldCenter())},applyTorque:function(a,b){this.bodiesMap[a].ApplyTorque(b)},setGravity:function(a){this.world.SetGravity(new j(a.x,a.y))},removeBody:function(a){this.bodiesMap[a]&&(this.fixturesMap[a]&&this.bodiesMap[a].DestroyFixture(this.fixturesMap[a]),
this.world.DestroyBody(this.bodiesMap[a]),delete this.bodiesMap[a])},wakeUpBody:function(a){this.bodiesMap[a]&&this.bodiesMap[a].SetAwake(!0)},addContactListener:function(a){var b=new Box2D.Dynamics.b2ContactListener;if(a.beginContact)b.BeginContact=function(b){a.beginContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.EndContact)b.endContact=function(b){a.endContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.postSolve)b.PostSolve=
function(b,f){a.postSolve(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData(),f.normalImpulses[0])};this.world.SetContactListener(b)},addRevoluteJoint:function(a,b,d){var a=this.bodiesMap[a],b=this.bodiesMap[b],i=new n;i.Initialize(a,b,a.GetWorldCenter());d&&g.mixin(i,d);this.world.CreateJoint(i)},beginContact:function(){},endContact:function(){},postSolve:function(a,b,d){this.collisions[a]=this.collisions[a]||[];this.collisions[a].push({id:b,impulse:d});this.collisions[b]=
this.collisions[b]||[];this.collisions[b].push({id:a,impulse:d})}})})},"dcl/dcl":function(){(function(b){"undefined"!=typeof define?define(["./mini"],b):"undefined"!=typeof module?module.exports=b(require("./mini")):dcl=b(dcl)})(function(b){function e(){}function g(b,h,i){var g=b||e,a=h||e,j=i||e,c=function(){var c;g.apply(this,arguments);try{c=j.apply(this,arguments)}catch(b){c=b}a.call(this,arguments,c);if(c instanceof Error)throw c;return c};c.advices={b:b,a:h,f:i};return c}function j(d){return function(h,
i){var g=h._m,a;g&&((a=+g.w[i]||0)&&a!=d&&b._e("set chaining",i,h,d,a),g.w[i]=d)}}var h=b(b.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});b.mix(b,{Advice:h,advise:function(b){return new h(b)},before:function(b){return new h({before:b})},after:function(b){return new h({after:b})},around:b.superCall,chainBefore:j(1),chainAfter:j(2),isInstanceOf:function(b,h){if(b instanceof h)return!0;var i=b.constructor._m,g;if(i)for(i=i.b,g=i.length-1;0<=g;--g)if(i[g]===
h)return!0;return!1},_sb:function(d,h,i,j){var j=j[i]=b._ec(h,i,"f"),a=b._ec(h,i,"b").reverse(),h=b._ec(h,i,"a"),j=d?b._st(j,1==d?function(a){return b._sc(a.reverse())}:b._sc,i):b._ss(j,i);return!a.length&&!h.length?j||function(){}:g(b._sc(a),b._sc(h),j)}});return b})},"dcl/mini":function(){(function(b){"undefined"!=typeof define?define([],b):"undefined"!=typeof module?module.exports=b():dcl=b()})(function(){function b(a,c){var f=[0],i,e,k,n,t,q,u,x,F=0,y;if(a)if(a instanceof Array){n={};u=a.slice(0).reverse();
for(x=u.length-1;0<=x;--x)if(e=u[x],e._u=e._u||j++,i=e._m){for(q=i.b,F=q.length-1;0<F;--F)y=q[F]._u,n[y]=(n[y]||0)+1;u[x]=q.slice(0)}else u[x]=[e];t={};a:for(;u.length;){for(x=0;x<u.length;++x)if(q=u[x],e=q[0],y=e._u,!n[y]){t[y]||(f.push(e),t[y]=1);q.shift();q.length?--n[q[0]._u]:u.splice(x,1);continue a}b._e("cycle",c,u)}a=a[0];F=f.length-((n=a._m)&&a===f[f.length-(F=n.b.length)]?F:1)-1}else a._u=a._u||j++,f=f.concat((n=a._m)?n.b:a);i=a?b.delegate(a[d]):{};for(q=a&&(n=a._m)?b.delegate(n.w):{constructor:2};0<
F;--F)if(e=f[F],n=e._m,l(i,n&&n.h||e[d]),n)for(y in u=n.w)q[y]=(+q[y]||0)|u[y];for(y in c)g(n=c[y])?q[y]=+q[y]||0:i[y]=n;t={b:f,h:c,w:q,c:{}};f[0]={_m:t,prototype:i};e=i;n=t.w;q=t.b;u=t.c;for(k in n)e[k]=b._sb(n[k],q,k,u);k=i[h];k._m=t;k[d]=i;f[0]=k;return b._p(k)}function e(a){this.f=a}function g(a){return a instanceof e}var j=0,h="constructor",d="prototype",k=function(){},i={},l,a,n,c,f;(l=function(a,c){for(var b in c)a[b]=c[b]})(b,{mix:l,delegate:function(a){k[d]=a;a=new k;k[d]=null;return a},
Super:e,superCall:function(a){return new e(a)},_p:function(a){return a},_e:function(a){throw Error("dcl: "+a);},_f:function(a,c){var b=a.f(c);b.ctr=a.ctr;return b},_ec:a=function(a,c,b){for(var f=a.length-1,h=[],e,j,k="f"==b;e=a[f];--f)if((j=e._m)?(j=j.h).hasOwnProperty(c)&&(g(j=j[c])?k?j.f:j=j[b]:k):k&&(j=e[d][c])&&j!==i[c])j.ctr=e,h.push(j);return h},_sc:c=function(a){var c=a.length,b;return!c?0:1==c?(b=a[0],function(){b.apply(this,arguments)}):function(){for(var b=0;b<c;++b)a[b].apply(this,arguments)}},
_ss:n=function(a,c){for(var f=0,d,j=i[c];d=a[f];++f)j=g(d)?a[f]=b._f(d,j,c):d;return c!=h?j:function(){j.apply(this,arguments)}},_st:f=function(a,c,f){for(var d=0,i,j,e=0;i=a[d];++d)g(i)&&(j=d-e,a[d]=b._f(i,!j?0:1==j?a[e]:c(a.slice(e,d)),f),e=d);j=d-e;return!j?0:1==j&&f!=h?a[e]:c(e?a.slice(e):a)},_sb:function(b,d,i,h){d=h[i]=a(d,i,"f");return(b?f(d,c,i):n(d,i))||function(){}}});return b})},"dcl/bases/Mixer":function(){(function(b){"undefined"!=typeof define?define(["../mini"],b):"undefined"!=typeof module?
module.exports=b(require("../mini")):dclBasesMixer=b(dcl)})(function(b){return b(null,{declaredClass:"dcl/bases/Mixer",constructor:function(e){b.mix(this,e)}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(b,e){e.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var g=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],j=g.length,h=function(a,
d,c){var f,i=0,h=b.global;if(!c)if(a.length){f=a[i++];try{c=b.scopeMap[f]&&b.scopeMap[f][1]}catch(j){}c=c||(f in h?h[f]:d?h[f]={}:void 0)}else return h;for(;c&&(f=a[i++]);)c=f in c?c[f]:d?c[f]={}:void 0;return c},d=Object.prototype.toString,k=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},i=/\{([^\}]+)\}/g,l={_extraNames:g,_mixin:function(a,b,c){var f,d,i,h={};for(f in b)if(d=b[f],!(f in a)||a[f]!==d&&(!(f in h)||h[f]!==d))a[f]=c?c(d):d;if(e("bug-for-in-skips-shadowed")&&
b)for(i=0;i<j;++i)if(f=g[i],d=b[f],!(f in a)||a[f]!==d&&(!(f in h)||h[f]!==d))a[f]=c?c(d):d;return a},mixin:function(a,b){a||(a={});for(var c=1,d=arguments.length;c<d;c++)l._mixin(a,arguments[c]);return a},setObject:function(a,b,c){var d=a.split("."),a=d.pop();return(c=h(d,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return h(a.split("."),b,c)},exists:function(a,b){return void 0!==l.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&
(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===d.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||l.isArray(a)||l.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!l.isString(a)&&!l.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(l.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!l.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,b){for(var c=1,d=arguments.length;c<
d;c++)l._mixin(a.prototype,arguments[c]);return a},_hitchArgs:function(a,d){var c=l._toArray(arguments,2),f=l.isString(d);return function(){var i=l._toArray(arguments),h=f?(a||b.global)[d]:d;return h&&h.apply(a||this,c.concat(i))}},hitch:function(a,d){if(2<arguments.length)return l._hitchArgs.apply(b,arguments);d||(d=a,a=null);if(l.isString(d)){a=a||b.global;if(!a[d])throw['lang.hitch: scope["',d,'"] is null (scope="',a,'")'].join("");return function(){return a[d].apply(a,arguments||[])}}return!a?
d:function(){return d.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,c){a.prototype=b;var d=new a;a.prototype=null;c&&l._mixin(d,c);return d}}(),_toArray:e("ie")?function(){function a(a,b,d){d=d||[];for(b=b||0;b<a.length;b++)d.push(a[b]);return d}return function(b){return(b.item?a:k).apply(this,arguments)}}():k,partial:function(a){return l.hitch.apply(b,[null].concat(l._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||l.isFunction(a))return a;if(a.nodeType&&
"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,c,d;if(l.isArray(a)){b=[];for(c=0,d=a.length;c<d;++c)c in a&&b.push(l.clone(a[c]))}else b=a.constructor?new a.constructor:{};return l._mixin(b,a,l.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,c){return a.replace(c||i,l.isFunction(b)?b:function(a,c){return l.getObject(c,
!1,b)})}};l.mixin(b,l);return l})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(b,e,g,j){var h,b={},d={},k={config:e,global:this,dijit:b,dojox:d},b={dojo:["dojo",k],dijit:["dijit",b],dojox:["dojox",d]},j=g.map&&g.map[j.id.match(/[^\/]+/)[0]];for(h in j)b[h]?b[h][0]=j[h]:b[h]=[j[h],{}];for(h in b)j=b[h],j[1]._scopeName=j[0],e.noGlobals||(this[j[0]]=j[1]);k.scopeMap=b;k.baseUrl=k.config.baseUrl=g.baseUrl;k.isAsync=g.async;k.locale=e.locale;e="$Rev: 30226 $".match(/\d+/);
k.version={major:1,minor:8,patch:3,flag:"",revision:e?+e[0]:NaN,toString:function(){var b=k.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(k);k.exit=function(){};k.deprecated=k.experimental=function(){};k._hasResource={};return k})},"dojo/has":function(){define("dojo/has",["require","module"],function(b){var e=b.has||function(){};e.add("touch","ontouchstart"in
document);e.add("device-width",screen.availWidth||innerWidth);b=document.createElement("form");e.add("dom-attributes-explicit",0==b.attributes.length);e.add("dom-attributes-specified-flag",0<b.attributes.length&&40>b.attributes.length);e.clearElement=function(b){b.innerHTML="";return b};e.normalize=function(b,j){var h=b.match(/[\?:]|[^:\?]*/g),d=0,k=function(b){var j=h[d++];if(":"==j)return 0;if("?"==h[d++]){if(!b&&e(j))return k();k(!0);return k(b)}return j||0};return(b=k())&&j(b)};e.load=function(b,
j,h){b?j([b],h):h()};return e})},"dojo/_base/config":function(){define(["../has","require"],function(b,e){var g={},j=e.rawConfig,h;for(h in j)g[h]=j[h];return g})},"dojo/sniff":function(){define("dojo/sniff",["./has"],function(b){var e=navigator,g=e.userAgent,e=e.appVersion,j=parseFloat(e);b.add("air",0<=g.indexOf("AdobeAIR"));b.add("khtml",0<=e.indexOf("Konqueror")?j:void 0);b.add("webkit",parseFloat(g.split("WebKit/")[1])||void 0);b.add("chrome",parseFloat(g.split("Chrome/")[1])||void 0);b.add("safari",
0<=e.indexOf("Safari")&&!b("chrome")?parseFloat(e.split("Version/")[1]):void 0);b.add("mac",0<=e.indexOf("Macintosh"));b.add("quirks","BackCompat"==document.compatMode);b.add("ios",/iPhone|iPod|iPad/.test(g));b.add("android",parseFloat(g.split("Android ")[1])||void 0);if(!b("webkit")){0<=g.indexOf("Opera")&&b.add("opera",9.8<=j?parseFloat(g.split("Version/")[1])||j:j);0<=g.indexOf("Gecko")&&!b("khtml")&&!b("webkit")&&b.add("mozilla",j);b("mozilla")&&b.add("ff",parseFloat(g.split("Firefox/")[1]||g.split("Minefield/")[1])||
void 0);if(document.all&&!b("opera"))g=parseFloat(e.split("MSIE ")[1])||void 0,(e=document.documentMode)&&5!=e&&Math.floor(g)!=e&&(g=e),b.add("ie",g);b.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return b})},"frozen/box2d/CircleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(b,e,g){return b([e,g],{radius:1,draw:b.superCall(function(b){return function(h,d){h.fillStyle=this.color;h.strokeStyle=this.strokeColor;h.beginPath();h.arc(this.x*d,this.y*d,this.radius*d,0,2*
Math.PI,!0);h.closePath();h.fill();h.stroke();this.staticBody||(h.save(),h.translate(this.x*d,this.y*d),h.rotate(this.angle),h.translate(-this.x*d,-this.y*d),h.beginPath(),h.moveTo(this.x*d,this.y*d),h.lineTo(this.x*d,this.y*d-this.radius*d),h.closePath(),h.stroke(),h.restore());b.apply(this,[h,d])}}),scaleShape:b.superCall(function(b){return function(h){this.radius*=h;b.apply(this,[h])}})})})},"frozen/box2d/Entity":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(b,e,g){return b(e,
{id:0,x:0,y:0,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,angularVelocity:0,angularDamping:0,staticBody:!1,color:"rgba(128,128,128,0.5)",strokeColor:"#000",hidden:!1,update:function(b){g.mixin(this,b)},draw:function(b,h){b.fillStyle="black";b.beginPath();b.arc(this.x*h,this.y*h,4,0,2*Math.PI,!0);b.closePath();b.fill();if(this.center)b.fillStyle="yellow",b.beginPath(),b.arc(this.center.x*h,this.center.y*h,2,0,2*Math.PI,!0),b.closePath(),b.fill()},
scaleShape:function(b){this.x*=b;this.y*=b}})})},"frozen/box2d/PolygonEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils"],function(b,e,g,j){return b([e,g],{points:[],draw:b.superCall(function(b){return function(d,e){d.save();d.translate(this.x*e,this.y*e);d.rotate(this.angle);d.translate(-this.x*e,-this.y*e);d.fillStyle=this.color;d.beginPath();d.moveTo((this.x+this.points[0].x)*e,(this.y+this.points[0].y)*e);for(var i=1;i<this.points.length;i++)d.lineTo((this.points[i].x+this.x)*
e,(this.points[i].y+this.y)*e);d.lineTo((this.x+this.points[0].x)*e,(this.y+this.points[0].y)*e);d.closePath();d.fill();d.stroke();d.restore();b.apply(this,[d,e])}}),scaleShape:b.superCall(function(b){return function(d){this.points=j.scalePoints(this.points,d);b.apply(this,[d])}})})})},"frozen/utils":function(){define("./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints".split(","),
function(b,e,g,j,h,d,k,i,l){return{averagePoints:b,degreesToRadians:e,radiansToDegrees:g,pointInPolygon:j,distance:h,degreesFromCenter:d,radiansFromCenter:k,scalePoints:i,translatePoints:l}})},"frozen/utils/averagePoints":function(){define([],function(){return function(b){var e={x:0,y:0};b.forEach(function(b){e.x+=b.x;e.y+=b.y});e.x/=b.length;e.y/=b.length;return e}})},"frozen/utils/degreesToRadians":function(){define(function(){var b=Math.PI/180;return function(e){return e*b}})},"frozen/utils/radiansToDegrees":function(){define(function(){var b=
180/Math.PI;return function(e){return e*b}})},"frozen/utils/pointInPolygon":function(){define(function(){return function(b,e){for(var g=e.points||e,j=!1,h=-1,d=g.length,k=d-1;++h<d;k=h)(g[h].y<=b.y&&b.y<g[k].y||g[k].y<=b.y&&b.y<g[h].y)&&b.x<(g[k].x-g[h].x)*(b.y-g[h].y)/(g[k].y-g[h].y)+g[h].x&&(j=!j);return j}})},"frozen/utils/distance":function(){define(function(){return function(b,e){return Math.sqrt((e.x-b.x)*(e.x-b.x)+(e.y-b.y)*(e.y-b.y))}})},"frozen/utils/degreesFromCenter":function(){define(["./radiansToDegrees",
"./radiansFromCenter"],function(b,e){return function(g,j){return b(e(g,j))}})},"frozen/utils/radiansFromCenter":function(){define(function(){var b={x:0,y:0};return function(e,g){e=e||b;return e.x===g.x&&e.y===g.y?0:e.x===g.x?e.y>g.y?0:Math.PI:e.y===g.y?e.x>g.x?1.5*Math.PI:Math.PI/2:e.x<g.x&&e.y>g.y?Math.atan((g.x-e.x)/(e.y-g.y)):e.x<g.x&&e.y<g.y?Math.PI/2+Math.atan((g.y-e.y)/(g.x-e.x)):e.x>g.x&&e.y<g.y?Math.PI+Math.atan((e.x-g.x)/(g.y-e.y)):1.5*Math.PI+Math.atan((e.y-g.y)/(e.x-g.x))}})},"frozen/utils/scalePoints":function(){define(["dojo/_base/lang"],
function(b){var e=function(g,j){if(b.isArray(g)){var h=[];g.forEach(function(b){h.push(e(b,j))});g=h}else g="object"===typeof j?{x:g.x*j.x,y:g.y*j.y}:{x:g.x*j,y:g.y*j};return g};return e})},"frozen/utils/translatePoints":function(){define(["dojo/_base/lang"],function(b){var e=function(g,j){if(b.isArray(g)){var h=[];g.forEach(function(b){h.push(e(b,j))});g=h}else g={x:g.x,y:g.y},j.hasOwnProperty("x")&&(g.x+=j.x),j.hasOwnProperty("y")&&(g.y+=j.y);return g};return e})},"frozen/box2d/MultiPolygonEntity":function(){define(["dcl",
"dcl/bases/Mixer","./Entity","../utils"],function(b,e,g,j){return b([e,g],{polys:[],draw:b.superCall(function(b){return function(d,e){d.save();d.translate(this.x*e,this.y*e);d.rotate(this.angle);d.translate(-this.x*e,-this.y*e);d.fillStyle=this.color;for(var i=0;i<this.polys.length;i++){d.beginPath();d.moveTo((this.x+this.polys[i][0].x)*e,(this.y+this.polys[i][0].y)*e);for(var j=1;j<this.polys[i].length;j++)d.lineTo((this.polys[i][j].x+this.x)*e,(this.polys[i][j].y+this.y)*e);d.lineTo((this.x+this.polys[i][0].x)*
e,(this.y+this.polys[i][0].y)*e);d.closePath();d.fill();d.stroke()}d.restore();b.apply(this,[d,e])}}),scaleShape:b.superCall(function(b){return function(d){this.polys=j.scalePoints(this.polys,d);b.apply(this,[d])}})})})},"frozen/box2d/RectangleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(b,e,g){return b([e,g],{halfWidth:1,halfHeight:1,draw:b.superCall(function(b){return function(e,d){e.save();e.translate(this.x*d,this.y*d);e.rotate(this.angle);e.translate(-this.x*d,-this.y*
d);e.fillStyle=this.color;e.strokeStyle=this.strokeColor;e.fillRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*d);e.strokeRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*d);e.restore();b.apply(this,[e,d])}}),scaleShape:b.superCall(function(b){return function(e){this.halfHeight*=e;this.halfWidth*=e;b.apply(this,[e])}})})})},"frozen/reiner/Creature":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang",
"../Sprite","../Animation"],function(b,e,g,j,h){return b([e,j],{statics:{EAST:0,NORTH:1,NORTHEAST:2,NORTHWEST:3,SOUTH:4,SOUTHEAST:5,SOUTHWEST:6,WEST:7,STATE_WALKING:0,STATE_DYING:1,STATE_IDLE:2},state:0,walkingAnims:[],dyingAnims:[],idleAnims:[],direction:0,constructor:function(){this.state=this.statics.STATE_IDLE;this.direction=this.statics.EAST},update:function(b){this.x+=this.dx*b;this.y+=this.dy*b;if(this.state!==this.statics.STATE_DYING){if(0<this.dx&&0===this.dy)this.direction=this.statics.EAST;
else if(0===this.dx&&0>this.dy)this.direction=this.statics.NORTH;else if(0<this.dx&&0>this.dy)this.direction=this.statics.NORTHEAST;else if(0>this.dx&&0>this.dy)this.direction=this.statics.NORTHWEST;else if(0===this.dx&&0<this.dy)this.direction=this.statics.SOUTH;else if(0<this.dx&&0<this.dy)this.direction=this.statics.SOUTHEAST;else if(0>this.dx&&0<this.dy)this.direction=this.statics.SOUTHWEST;else if(0>this.dx&&0===this.dy)this.direction=this.statics.WEST;this.state=0===this.dx&&0===this.dy?this.statics.STATE_IDLE:
this.statics.STATE_WALKING}this.anim=this.state===this.statics.STATE_WALKING?this.walkingAnims[this.direction]:this.state===this.statics.STATE_DYING?this.dyingAnims[this.direction]:this.idleAnims[this.direction];this.anim.update(b)},createAnimations:function(b,e,i,j,a,n){var c=[],f=g.isArray(e),p=1;n||(n=0);for(var z=0;8>z;z++){c[z]=new h({height:j,width:a,image:i});for(var w=0;w<b;w++)p=f?e[w]:e,c[z].addFrame(p,w+b*z,n)}return c}})})},"frozen/Sprite":function(){define(["dcl","dcl/bases/Mixer"],function(b,
e){var g=b(e,{x:0,y:0,dx:0,dy:0,name:null,collisionRadius:40,update:function(b){this.x+=this.dx*b;this.y+=this.dy*b;this.anim.update(b)},getX:function(){return this.x},getY:function(){return this.y},setX:function(b){this.x=b},setY:function(b){this.y=b},getWidth:function(){return this.anim.width},getHeight:function(){return this.anim.height},getVelocityX:function(){return this.dx},getVelocityY:function(){return this.dy},setVelocityX:function(b){this.dx=this.limitSpeed(b)},setVelocityY:function(b){this.dy=
this.limitSpeed(b)},limitSpeed:function(b){return this.getMaxSpeed()?Math.abs(b)>this.getMaxSpeed()?0<b?this.getMaxSpeed():0>b?this.getMaxSpeed():0:b:b},getMaxSpeed:function(){return this.maxSpeed},getCurrentFrame:function(){if(this.anim)return this.anim.getCurrentFrame()},drawCurrentFrame:function(b){var e=this.anim.getCurrentFrame();b.drawImage(this.anim.image,e.imgSlotX*this.anim.width,e.imgSlotY*this.anim.height,this.anim.width,this.anim.height,this.x,this.y,this.anim.width,this.anim.height)},
draw:function(b){this.anim&&this.anim.draw(b,this.x,this.y)},clone:function(){return new g({anim:this.anim.clone()})}});return g})},"frozen/Animation":function(){define(["./AnimFrame","dcl","dcl/bases/Mixer","dojo/_base/lang"],function(b,e,g,j){var h=e(g,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,width:64,image:null,constructor:function(){this.start()},createFromTile:function(b,e,i,h,a,g){return this.createFromSheet(b,e,i,a,h,g)},createFromSheet:function(b,e,i,g,a,n){i=new h({image:i,
height:a,width:g});g=j.isArray(e);a=1;n||(n=0);for(var c=0;c<b;c++)a=g?e[c]:e,i.addFrame(a,c,n);return i},clone:function(){return new h({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(d,e,i){if(!this.frames)this.frames=[];this.totalDuration+=d;this.frames.push(new b({endTime:this.totalDuration,image:this.image,imgSlotX:e,imgSlotY:i}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(b){if(1<this.frames.length){this.animTime+=b;if(this.animTime>=
this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.getFrame(this.currFrameIndex).endTime;)this.currFrameIndex++}},getImage:function(){return this.image},getFrame:function(b){return this.frames[b]},getCurrentFrame:function(){return 0===this.frames.length?null:this.getFrame(this.currFrameIndex)},draw:function(b,e,i){var h=this.getCurrentFrame();b.drawImage(this.image,h.imgSlotX*this.width,h.imgSlotY*this.height,this.width,this.height,e,i,this.width,this.height)}});
return h})},"frozen/AnimFrame":function(){define(["dcl","dcl/bases/Mixer"],function(b,e){return b(e,{endTime:0,imgSlotX:0,imgSlotY:0,image:null})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(b,e){return b(e,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},reset:function(){this.state=this.statics.STATE_RELEASED;
this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(b){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=b,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var b=this.amount;
if(0!==b)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return b}})})},"frozen/MouseAction":function(){define(["dcl","dcl/bases/Mixer","./GameAction"],function(b,e,g){return b([e,g],{startPosition:null,endPosition:null,position:null})})},"frozen/GameCore":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),
function(b,e,g,j,h,d){return b(e,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=j.byId(this.canvasId);
if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.height?this.canvas.height=this.height:this.height=this.canvas.height;this.width?this.canvas.width=this.width:this.width=this.canvas.width;if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new h({canvas:this.canvas,gameArea:j.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new h({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=
new d;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=
this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||this.update(this.elapsedTime),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var b=Date.now();this.prevTime=this.currTime=b;this.loopRunner=g.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},
loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},update:function(){},updateLoadingScreen:function(){},draw:function(b){if("2d"===this.contextType)b.font="14px sans-serif",b.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(b){if(this.resourceManager&&"2d"===this.contextType)b.fillStyle=this.loadingBackground,b.fillRect(0,0,this.width,this.height),b.fillStyle=this.loadingForeground,b.strokeStyle=this.loadingForeground,b.font=
"bold "+Math.floor(this.height/12)+"px sans-serif",b.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),b.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),b.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),b.lineWidth=4}})})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(b,e){if(7>=b("ie"))try{document.execCommand("BackgroundImageCache",
!1,!0)}catch(g){}var j={};j.byId=b("ie")?function(b,h){if("string"!=typeof b)return b;var i=h||e.doc,g=b&&i.getElementById(b);if(g&&(g.attributes.id.value==b||g.id==b))return g;i=i.all[b];if(!i||i.nodeName)i=[i];for(var a=0;g=i[a++];)if(g.attributes&&g.attributes.id&&g.attributes.id.value==b||g.id==b)return g}:function(b,h){return("string"==typeof b?(h||e.doc).getElementById(b):b)||null};j.isDescendant=function(b,e){try{b=j.byId(b);for(e=j.byId(e);b;){if(b==e)return!0;b=b.parentNode}}catch(i){}return!1};
b.add("css-user-select",function(b,e,i){if(!i)return!1;var b=i.style,e=["Khtml","O","ms","Moz","Webkit"],i=e.length,h="userSelect";do if("undefined"!==typeof b[h])return h;while(i--&&(h=e[i]+"UserSelect"));return!1});var h=b("css-user-select");j.setSelectable=h?function(b,e){j.byId(b).style[h]=e?"":"none"}:function(b,e){var b=j.byId(b),i=b.getElementsByTagName("*"),h=i.length;if(e)for(b.removeAttribute("unselectable");h--;)i[h].removeAttribute("unselectable");else for(b.setAttribute("unselectable",
"on");h--;)i[h].setAttribute("unselectable","on")};return j})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(b,e,g){var j={global:b.global,doc:this.document||null,body:function(e){e=e||b.doc;return e.body||e.getElementsByTagName("body")[0]},setContext:function(e,d){b.global=j.global=e;b.doc=j.doc=d},withGlobal:function(e,d,g,i){var l=b.global;try{return b.global=j.global=e,j.withDoc.call(null,e.document,d,g,i)}finally{b.global=j.global=l}},withDoc:function(e,d,k,
i){var l=j.doc,a=g("quirks"),n=g("ie"),c,f,p;try{b.doc=j.doc=e;b.isQuirks=g.add("quirks","BackCompat"==b.doc.compatMode,!0,!0);if(g("ie")&&(p=e.parentWindow)&&p.navigator)c=parseFloat(p.navigator.appVersion.split("MSIE ")[1])||void 0,(f=e.documentMode)&&5!=f&&Math.floor(c)!=f&&(c=f),b.isIE=g.add("ie",c,!0,!0);k&&"string"==typeof d&&(d=k[d]);return d.apply(k,i||[])}finally{b.doc=j.doc=l,b.isQuirks=g.add("quirks",a,!0,!0),b.isIE=g.add("ie",n,!0,!0)}}};e.mixin(b,j);return j})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,dcl,dcl/bases/Mixer,dojo/on,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),
function(b,e,g,j,h,d,k){return g(j,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(h(document,"keydown",k.hitch(this,"keyDown")),h(document,"keyup",k.hitch(this,"keyReleased")));this.handleMouse&&(h(this.canvas,"mousedown",k.hitch(this,"mouseDown")),h(document,"mouseup",k.hitch(this,"mouseUp")),h(this.canvas,"mousemove",k.hitch(this,"mouseMove")));this.handleTouch&&
(h(document,"touchend",k.hitch(this,"touchEnd")),h(this.canvas,"touchstart",k.hitch(this,"touchStart")),h(this.canvas,"touchmove",k.hitch(this,"touchMove")));if(!this.mouseAction)this.mouseAction=new e;if(!this.touchAction)this.touchAction=new e;this.gameArea&&this.canvasPercentage&&(window.addEventListener("resize",k.hitch(this,"resize"),!1),window.addEventListener("orientationchange",k.hitch(this,"resize"),!1))},mapToKey:function(b,d){if(!this.keyActions)this.keyActions=[];this.keyActions[d]=b},
addKeyAction:function(d,e){var a=new b;if(e)a.behavior=a.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(a,d);return a},setMouseAction:function(b){this.mouseAction=b},setTouchAction:function(b){this.touchAction=b},mouseUp:function(b){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(b)},mouseDown:function(b){this.mouseAction.press();this.mouseAction.startPosition=this.getMouseLoc(b);this.mouseAction.position=this.mouseAction.startPosition},mouseMove:function(b){this.mouseAction.position=
this.getMouseLoc(b)},touchStart:function(b){this.touchAction.press();this.touchAction.startPosition=this.getMouseLoc(b.changedTouches[0]);this.touchAction.position=this.touchAction.startPosition},touchEnd:function(b){this.touchAction.release();this.mouseAction.endPosition=this.getMouseLoc(b)},touchMove:function(b){this.touchAction.position=this.getMouseLoc(b.changedTouches[0]);b.preventDefault()},getKeyAction:function(b){return this.keyActions.length?this.keyActions[b.keyCode]||this.keyActions[String.fromCharCode(b.keyCode)]:
null},keyPressed:function(b){(b=this.getKeyAction(b))&&!b.isPressed()&&b.press()},keyDown:function(b){(b=this.getKeyAction(b))&&!b.isPressed()&&b.press()},keyReleased:function(b){(b=this.getKeyAction(b))&&b.release()},getMouseLoc:function(b){var e=d.position(this.canvas);return this.zoomRatio?{x:Math.round((b.clientX-e.x)/this.zoomRatio),y:Math.round((b.clientY-e.y)/this.zoomRatio)}:{x:Math.round(b.clientX-e.x),y:Math.round(b.clientY-e.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&
this.canvas){var b=this.canvas.width/this.canvas.height,d=window.innerWidth,a=window.innerHeight;d/a>b?(d=a*b,this.gameArea.style.height=Math.round(a)+"px",this.gameArea.style.width=d+"px"):(a=Math.round(d/b),this.gameArea.style.width=d+"px",this.gameArea.style.height=a+"px");this.zoomRatio=d/this.canvas.width*this.canvasPercentage;this.canvas.style.width=Math.floor(100*this.canvasPercentage)+"%";this.canvas.style.height=Math.floor(100*this.canvasPercentage)+"%"}}})})},"dojo/on":function(){define("dojo/on",
["require","./_base/kernel","./has"],function(b,e,g){function j(a,b,c,d,e){if(d=b.match(/(.*):(.*)/))return b=d[2],d=d[1],k.selector(d,b).call(e,a,c);g("touch")&&(i.test(b)&&(c=w(c)),!g("event-orientationchange")&&"orientationchange"==b&&(b="resize",a=window,c=w(c)));f&&(c=f(c));if(a.addEventListener){var h=b in n,j=h?n[b]:b;a.addEventListener(j,c,h);return{remove:function(){a.removeEventListener(j,c,h)}}}b="on"+b;throw Error("Target must be an event emitter");}function h(){this.cancelable=!1}function d(){this.bubbles=
!1}b=window.ScriptEngineMajorVersion;g.add("jscript",b&&b()+ScriptEngineMinorVersion()/10);g.add("event-orientationchange",g("touch")&&!g("android"));g.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var k=function(a,b,c,d){return"function"==typeof a.on&&"function"!=typeof b?a.on(b,c):k.parse(a,b,c,j,d,this)};k.pausable=function(a,b,c,d){var f,a=k(a,b,function(){if(!f)return c.apply(this,arguments)},d);a.pause=function(){f=
!0};a.resume=function(){f=!1};return a};k.once=function(a,b,c){var d=k(a,b,function(){d.remove();return c.apply(this,arguments)});return d};k.parse=function(a,b,c,d,f,e){if(b.call)return b.call(e,a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),h=[],g=0,i;i=b[g++];)h.push(d(a,i,c,f,e));h.remove=function(){for(var a=0;a<h.length;a++)h[a].remove()};return h}return d(a,b,c,f,e)};var i=/^touch/;k.selector=function(a,b,c){return function(d,f){function h(b){for(g=g&&g.matches?g:e.query;!g.matches(b,
a,d);)if(b==d||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;return b}var g="function"==typeof a?{matches:a}:this,i=b.bubble;return i?k(d,i(h),f):k(d,b,function(a){var b=h(a.target);return b&&f.call(b,a)})}};var l=[].slice,a=k.emit=function(a,b,c){var f=l.call(arguments,2),e="on"+b;if("parentNode"in a){var g=f[0]={},i;for(i in c)g[i]=c[i];g.preventDefault=h;g.stopPropagation=d;g.target=a;g.type=b;c=g}do a[e]&&a[e].apply(a,f);while(c&&c.bubbles&&(a=a.parentNode));return c&&c.cancelable&&c},n={};
if(!g("event-stopimmediatepropagation"))var c=function(){this.modified=this.immediatelyStopped=!0},f=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=c,a.apply(this,arguments)}};n={focusin:"focus",focusout:"blur"};k.emit=function(b,c,d){if(b.dispatchEvent&&document.createEvent){var f=b.ownerDocument.createEvent("HTMLEvents");f.initEvent(c,!!d.bubbles,!!d.cancelable);for(var e in d)e in f||(f[e]=d[e]);return b.dispatchEvent(f)&&f}return a.apply(k,arguments)};
if(g("touch"))var p=function(){},z=window.orientation,w=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(f){}b.type?(p.prototype=b,c=new p,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=function(){b.stopPropagation()}):(c=b,c.type=d);b.corrected=c;if("resize"==d){if(z==window.orientation)return null;z=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],
e;for(e in d)delete c[e],c[e]=d[e]}return a.call(this,c)}};return k})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(b,e,g,j){function h(a,b,c,d,e,h){h=h||"px";a=a.style;if(!isNaN(b))a.left=b+h;if(!isNaN(c))a.top=c+h;if(0<=d)a.width=d+h;if(0<=e)a.height=e+h}function d(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function k(a){return"border-box"==i.boxModel||"table"==
a.tagName.toLowerCase()||d(a)}var i={boxModel:"content-box"};if(b("ie"))i.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";i.getPadExtents=function(a,b){var a=g.byId(a),c=b||j.getComputedStyle(a),d=j.toPixelValue,e=d(a,c.paddingLeft),h=d(a,c.paddingTop),i=d(a,c.paddingRight),c=d(a,c.paddingBottom);return{l:e,t:h,r:i,b:c,w:e+i,h:h+c}};i.getBorderExtents=function(a,b){var a=g.byId(a),c=j.toPixelValue,d=b||j.getComputedStyle(a),e="none"!=d.borderLeftStyle?c(a,d.borderLeftWidth):
0,h="none"!=d.borderTopStyle?c(a,d.borderTopWidth):0,i="none"!=d.borderRightStyle?c(a,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(a,d.borderBottomWidth):0;return{l:e,t:h,r:i,b:c,w:e+i,h:h+c}};i.getPadBorderExtents=function(a,b){var a=g.byId(a),c=b||j.getComputedStyle(a),d=i.getPadExtents(a,c),c=i.getBorderExtents(a,c);return{l:d.l+c.l,t:d.t+c.t,r:d.r+c.r,b:d.b+c.b,w:d.w+c.w,h:d.h+c.h}};i.getMarginExtents=function(a,b){var a=g.byId(a),c=b||j.getComputedStyle(a),d=j.toPixelValue,e=d(a,c.marginLeft),
h=d(a,c.marginTop),i=d(a,c.marginRight),c=d(a,c.marginBottom);return{l:e,t:h,r:i,b:c,w:e+i,h:h+c}};i.getMarginBox=function(a,d){var a=g.byId(a),c=d||j.getComputedStyle(a),e=i.getMarginExtents(a,c),h=a.offsetLeft-e.l,k=a.offsetTop-e.t,l=a.parentNode,m=j.toPixelValue;if(b("mozilla")){var H=parseFloat(c.left),c=parseFloat(c.top);!isNaN(H)&&!isNaN(c)?(h=H,k=c):l&&l.style&&(l=j.getComputedStyle(l),"visible"!=l.overflow&&(h+="none"!=l.borderLeftStyle?m(a,l.borderLeftWidth):0,k+="none"!=l.borderTopStyle?
m(a,l.borderTopWidth):0))}else if((b("opera")||8==b("ie")&&!b("quirks"))&&l)l=j.getComputedStyle(l),h-="none"!=l.borderLeftStyle?m(a,l.borderLeftWidth):0,k-="none"!=l.borderTopStyle?m(a,l.borderTopWidth):0;return{l:h,t:k,w:a.offsetWidth+e.w,h:a.offsetHeight+e.h}};i.getContentBox=function(a,d){var a=g.byId(a),c=d||j.getComputedStyle(a),e=a.clientWidth,h=i.getPadExtents(a,c),k=i.getBorderExtents(a,c);e?(c=a.clientHeight,k.w=k.h=0):(e=a.offsetWidth,c=a.offsetHeight);b("opera")&&(h.l+=k.l,h.t+=k.t);return{l:h.l,
t:h.t,w:e-h.w-k.w,h:c-h.h-k.h}};i.setContentSize=function(a,b,c){var a=g.byId(a),d=b.w,b=b.h;k(a)&&(c=i.getPadBorderExtents(a,c),0<=d&&(d+=c.w),0<=b&&(b+=c.h));h(a,NaN,NaN,d,b)};var l={l:0,t:0,w:0,h:0};i.setMarginBox=function(a,e,c){var a=g.byId(a),f=c||j.getComputedStyle(a),c=e.w,p=e.h,z=k(a)?l:i.getPadBorderExtents(a,f),f=i.getMarginExtents(a,f);if(b("webkit")&&d(a)){var w=a.style;if(0<=c&&!w.width)w.width="4px";if(0<=p&&!w.height)w.height="4px"}0<=c&&(c=Math.max(c-z.w-f.w,0));0<=p&&(p=Math.max(p-
z.h-f.h,0));h(a,e.l,e.t,c,p)};i.isBodyLtr=function(a){a=a||e.doc;return"ltr"==(e.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};i.docScroll=function(a){var a=a||e.doc,d=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in d?{x:d.pageXOffset,y:d.pageYOffset}:(d=b("quirks")?e.body(a):a.documentElement)&&{x:i.fixIeBiDiScrollLeft(d.scrollLeft||0,a),y:d.scrollTop||0}};if(b("ie"))i.getIeDocumentElementOffset=function(a){a=a||e.doc;a=a.documentElement;if(8>b("ie")){var d=a.getBoundingClientRect(),
c=d.left,d=d.top;7>b("ie")&&(c+=a.clientLeft,d+=a.clientTop);return{x:0>c?0:c,y:0>d?0:d}}return{x:0,y:0}};i.fixIeBiDiScrollLeft=function(a,d){var d=d||e.doc,c=b("ie");if(c&&!i.isBodyLtr(d)){var f=b("quirks"),h=f?e.body(d):d.documentElement,g=e.global;6==c&&!f&&g.frameElement&&h.scrollHeight>h.clientHeight&&(a+=h.clientLeft);return 8>c||f?a+h.clientWidth-h.scrollWidth:-a}return a};i.position=function(a,d){var a=g.byId(a),c=e.body(a.ownerDocument),f=a.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-
f.left,h:f.bottom-f.top};if(9>b("ie")){var h=i.getIeDocumentElementOffset(a.ownerDocument);f.x-=h.x+(b("quirks")?c.clientLeft+c.offsetLeft:0);f.y-=h.y+(b("quirks")?c.clientTop+c.offsetTop:0)}d&&(c=i.docScroll(a.ownerDocument),f.x+=c.x,f.y+=c.y);return f};i.getMarginSize=function(a,b){var a=g.byId(a),c=i.getMarginExtents(a,b||j.getComputedStyle(a)),d=a.getBoundingClientRect();return{w:d.right-d.left+c.w,h:d.bottom-d.top+c.h}};i.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=
a.offsetY};return i})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(b,e){function g(c,e,f){e=e.toLowerCase();if(b("ie")){if("auto"==f){if("height"==e)return c.offsetHeight;if("width"==e)return c.offsetWidth}if("fontweight"==e)switch(f){case 700:return"bold";default:return"normal"}}e in a||(a[e]=n.test(e));return a[e]?d(c,f):f}var j,h={};j=b("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display=
"",b=c.getComputedStyle(a,null)}return b||{}}:b("ie")&&(9>b("ie")||b("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};h.getComputedStyle=j;var d;d=b("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,e=c.left,f=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(h){b=0}c.left=
e;d.left=f;return b}:function(a,b){return parseFloat(b)||0};h.toPixelValue=d;var k=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},i=9>b("ie")||10>b("ie")&&b("quirks")?function(a){try{return k(a).Opacity/100}catch(b){return 1}}:function(a){return j(a).opacity},l=9>b("ie")||10>b("ie")&&b("quirks")?function(a,b){var c=100*b,d=1==b;a.style.zoom=d?"":1;if(k(a))k(a,1).Opacity=c;else{if(d)return b;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+
c+")"}k(a,1).Enabled=!d;if("tr"==a.tagName.toLowerCase())for(c=a.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&l(c,b);return b}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},n=/margin|padding|width|height|max|min|offset/,c=b("ie")?"styleFloat":"cssFloat",f={cssFloat:c,styleFloat:c,"float":c};h.get=function(a,b){var c=e.byId(a),d=arguments.length;if(2==d&&"opacity"==b)return i(c);var b=f[b]||b,j=h.getComputedStyle(c);return 1==d?j:g(c,b,j[b]||c.style[b])};h.set=function(a,
b,c){var d=e.byId(a),g=arguments.length,i="opacity"==b,b=f[b]||b;if(3==g)return i?l(d,c):d.style[b]=c;for(var j in b)h.set(a,j,b[j]);return h.getComputedStyle(d)};return h})},"dojo/domReady":function(){define(["./has"],function(){function b(a){d?a(g):k.push(a)}var e=this,g=document,j={loaded:1,complete:1},h="string"!=typeof g.readyState,d=!!j[g.readyState];if(h)g.readyState="loading";if(!d){var k=[],i=[],l=function(a){a=a||e.event;if(!(d||"readystatechange"==a.type&&!j[g.readyState])){d=1;if(h)g.readyState=
"complete";for(;k.length;)k.shift()(g)}},a=function(a,b){a.addEventListener(b,l,!1);k.push(function(){a.removeEventListener(b,l,!1)})};a(g,"DOMContentLoaded");a(e,"load");"onreadystatechange"in g?a(g,"readystatechange"):h||i.push(function(){return j[g.readyState]});if(i.length){var n=function(){if(!d){for(var a=i.length;a--;)if(i[a]()){l("poller");return}setTimeout(n,30)}};n()}}b.load=function(a,d,e){b(e)};return b})},"frozen/ResourceManager":function(){define(["dcl","dcl/bases/Mixer","./shims/AudioContext"],
function(b,e){function g(b,d){var e=d;b&&(e=[b,d].join("/"));return e.replace(/\/{2,}/g,"/")}var j=null;window.AudioContext&&(j=new window.AudioContext);return b(e,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,audioContext:j,resourceList:{},loadImage:function(b){b=g(this.imageDir,b);if(this.resourceList[b])return this.resourceList[b].img;this.allLoaded=!1;var d=new Image,e={name:b,img:d,complete:!1};d.onload=function(){e.complete=!0};d.src=b;this.resourceList[b]=e;return d},
loadSound:function(b){var b=g(this.soundDir,b),d={name:b,buffer:null,complete:!1};if(this.audioContext){if(this.resourceList[b])return this.resourceList[b];this.resourceList[b]=d;var e=new XMLHttpRequest;e.open("GET",b,!0);e.responseType="arraybuffer";var i=this.audioContext;e.onload=function(){i.decodeAudioData(e.response,function(b){d.buffer=b;d.complete=!0},function(){})};e.send()}return d},playSound:function(b,d,e,g){e=e||0;if(this.audioContext&&b&&(b=b.buffer||b))try{var j=this.audioContext.createBufferSource();
j.buffer=b;if(d)j.loop=!0;if(g){var a=this.audioContext.createGainNode();a.gain.value=g;j.connect(a);a.connect(this.audioContext.destination)}else j.connect(this.audioContext.destination);j.noteOn(e);return j}catch(n){}},resourcesReady:function(){if(!this.allLoaded){for(var b in this.resourceList)if(!this.resourceList[b].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var b=0,d=0,e;for(e in this.resourceList){var g=this.resourceList[e];d++;g.complete&&(b+=1)}return 0===
d?0:Math.round(100*(b/d))}})})},"frozen/shims/AudioContext":function(){define(function(){for(var b=["ms","moz","webkit","o"],e=0;e<b.length&&!window.AudioContext;++e)window.AudioContext=window[b[e]+"AudioContext"]})},"frozen/shims/RAF":function(){define(function(){for(var b=0,e=["ms","moz","webkit","o"],g=0;g<e.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[e[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[g]+"CancelAnimationFrame"]||window[e[g]+"CancelRequestAnimationFrame"];
if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e){var h=(new Date).getTime(),d=Math.max(0,16-(h-b)),g=window.setTimeout(function(){e(h+d)},d);b=h+d;return g};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(b){clearTimeout(b)}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(b,e){return b.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,
END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,
UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(b,e,g){function j(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function h(a,b,c){var d,e,f,h,g,i,k,l=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=b,b=c);c=0;h=a.callee;(d=d||h.nom)||j("can't deduce a name to call inherited()",this.declaredClass);g=this.constructor._meta;f=g.bases;k=l.p;if(d!=
x){if(l.c!==h&&(k=0,i=f[0],g=i._meta,g.hidden[d]!==h)){(e=g.chains)&&"string"==typeof e[d]&&j("calling chained method with inherited: "+d,this.declaredClass);do if(g=i._meta,e=i.prototype,g&&(e[d]===h&&e.hasOwnProperty(d)||g.hidden[d]===h))break;while(i=f[++k]);k=i?k:-1}if(i=f[++k])if(e=i.prototype,i._meta&&e.hasOwnProperty(d))c=e[d];else{h=L[d];do if(e=i.prototype,(c=e[d])&&(i._meta?e.hasOwnProperty(d):c!==h))break;while(i=f[++k])}c=i&&c||L[d]}else{if(l.c!==h&&(k=0,(g=f[0]._meta)&&g.ctor!==h)){e=
g.chains;for((!e||"manual"!==e.constructor)&&j("calling chained constructor with inherited",this.declaredClass);(i=f[++k])&&!((g=i._meta)&&g.ctor===h););k=i?k:-1}for(;(i=f[++k])&&!(c=(g=i._meta)?g.ctor:i););c=i&&c}l.c=c;l.p=k;if(c)return!0===b?c:c.apply(this,b||a)}function d(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function k(a,b,c){var d=this.getInherited(a,b);if(d)return d.apply(this,c||b||a)}function i(a){for(var b=this.constructor._meta.bases,c=0,d=b.length;c<
d;++c)if(b[c]===a)return!0;return this instanceof a}function l(a,b){for(var c in b)c!=x&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(e("bug-for-in-skips-shadowed"))for(var d=g._extraNames,f=d.length;f;)c=d[--f],c!=x&&b.hasOwnProperty(c)&&(a[c]=b[c])}function a(a){H.safeMixin(this.prototype,a);return this}function n(a){return H([this].concat(a))}function c(a,b){return function(){var o;var c=arguments,d=c,e=c[0],f,g;g=a.length;var h;if(!(this instanceof c.callee))return m(c);if(b&&(e&&e.preamble||this.preamble)){h=
Array(a.length);h[0]=c;for(f=0;;){if(e=c[0])(e=e.preamble)&&(c=e.apply(this,c)||c);e=a[f].prototype;(e=e.hasOwnProperty("preamble")&&e.preamble)&&(c=e.apply(this,c)||c);if(++f==g)break;h[f]=c}}for(f=g-1;0<=f;--f)e=a[f],(o=(g=e._meta)?g.ctor:e,e=o)&&e.apply(this,h?h[f]:c);(e=this.postscript)&&e.apply(this,d)}}function f(a,b){return function(){var c=arguments,d=c,e=c[0];if(!(this instanceof c.callee))return m(c);if(b){if(e)(e=e.preamble)&&(d=e.apply(this,d)||d);(e=this.preamble)&&e.apply(this,d)}a&&
a.apply(this,c);(e=this.postscript)&&e.apply(this,c)}}function p(a){return function(){var o;var b=arguments,c=0,d,e;if(!(this instanceof b.callee))return m(b);for(;d=a[c];++c)if(o=(e=d._meta)?e.ctor:d,d=o){d.apply(this,b);break}(d=this.postscript)&&d.apply(this,b)}}function z(a,b,c){return function(){var d,e,f=0,g=1;c&&(f=b.length-1,g=-1);for(;d=b[f];f+=g)e=d._meta,(d=(e?e.hidden:d.prototype)[a])&&d.apply(this,arguments)}}function w(a){q.prototype=a.prototype;a=new q;q.prototype=null;return a}function m(a){var b=
a.callee,c=w(b);b.apply(c,a);return c}function H(b,e,k){"string"!=typeof b&&(k=e,e=b,b="");var k=k||{},m,q,s,A,I,r,D,G=1,Q=e;if("[object Array]"==t.call(e)){G=b;s=[];A=[{cls:0,refs:[]}];r={};for(var M=1,R=e.length,J=0,B,O,v,E;J<R;++J){(B=e[J])?"[object Function]"!=t.call(B)&&j("mixin #"+J+" is not a callable constructor.",G):j("mixin #"+J+" is unknown. Did you use dojo.require to pull it in?",G);O=B._meta?B._meta.bases:[B];v=0;for(B=O.length-1;0<=B;--B){E=O[B].prototype;if(!E.hasOwnProperty("declaredClass"))E.declaredClass=
"uniqName_"+u++;E=E.declaredClass;r.hasOwnProperty(E)||(r[E]={count:0,refs:[],cls:O[B]},++M);E=r[E];v&&v!==E&&(E.refs.push(v),++v.count);v=E}++v.count;A[0].refs.push(v)}for(;A.length;){v=A.pop();s.push(v.cls);for(--M;q=v.refs,1==q.length;){v=q[0];if(!v||--v.count){v=0;break}s.push(v.cls);--M}if(v)for(J=0,R=q.length;J<R;++J)v=q[J],--v.count||A.push(v)}M&&j("can't build consistent linearization",G);B=e[0];s[0]=B?B._meta&&B===s[s.length-B._meta.bases.length]?B._meta.bases.length:1:0;r=s;s=r[0];G=r.length-
s;e=r[G]}else r=[0],e?"[object Function]"==t.call(e)?(s=e._meta,r=r.concat(s?s.bases:e)):j("base class is not a callable constructor.",b):null!==e&&j("unknown base class. Did you use dojo.require to pull it in?",b);if(e)for(q=G-1;;--q){m=w(e);if(!q)break;s=r[q];(s._meta?l:C)(m,s.prototype);A=new Function;A.superclass=e;A.prototype=m;e=m.constructor=A}else m={};H.safeMixin(m,k);s=k.constructor;if(s!==L.constructor)s.nom=x,m.constructor=s;for(q=G-1;q;--q)(s=r[q]._meta)&&s.chains&&(D=C(D||{},s.chains));
m["-chains-"]&&(D=C(D||{},m["-chains-"]));s=!D||!D.hasOwnProperty(x);r[0]=A=D&&"manual"===D.constructor?p(r):1==r.length?f(k.constructor,s):c(r,s);A._meta={bases:r,hidden:k,chains:D,parents:Q,ctor:k.constructor};A.superclass=e&&e.prototype;A.extend=a;A.createSubclass=n;A.prototype=m;m.constructor=A;m.getInherited=d;m.isInstanceOf=i;m.inherited=F;m.__inherited=h;if(b)m.declaredClass=b,g.setObject(b,A);if(D)for(I in D)if(m[I]&&"string"==typeof D[I]&&I!=x)s=m[I]=z(I,r,"after"===D[I]),s.nom=I;return A}
var C=g.mixin,L=Object.prototype,t=L.toString,q=new Function,u=0,x="constructor",F=b.config.isDebug?k:h;b.safeMixin=H.safeMixin=function(a,b){var c,d;for(c in b)if(d=b[c],(d!==L[c]||!(c in L))&&c!=x){if("[object Function]"==t.call(d))d.nom=c;a[c]=d}if(e("bug-for-in-skips-shadowed"))for(var f=g._extraNames,h=f.length;h;)if(c=f[--h],d=b[c],(d!==L[c]||!(c in L))&&c!=x){if("[object Function]"==t.call(d))d.nom=c;a[c]=d}return a};return b.declare=H})}}});
(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();