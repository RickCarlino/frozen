//>>built
(function(a,c){var g,f,i,k=function(){},e=function(b){for(var d in b)return 0;return 1},h={}.toString,l=function(b){return"[object Function]"==h.call(b)},b=function(b){return"[object String]"==h.call(b)},d=function(b){return"[object Array]"==h.call(b)},j=function(b,d){if(b)for(var a=0;a<b.length;)d(b[a++])},m=function(b,d){for(var a in d)b[a]=d[a];return b},u=function(b,d){return m(Error(b),{src:"dojoLoader",info:d})},o=1,q=function(){return"_"+o++},n=function(b,d,a){return ha(b,d,a,0,n)},A=this,
B=A.document,ya=B&&B.createElement("DiV"),s=n.has=function(b){return l(p[b])?p[b]=p[b](A,B,ya):p[b]},p=s.cache=c.hasCache;s.add=function(b,d,a,e){(void 0===p[b]||e)&&(p[b]=d);return a&&s(b)};for(var r in a.has)s.add(r,a.has[r],0,1);n.async=1;var w=new Function("return eval(arguments[0]);");n.eval=function(b,d){return w(b+"\r\n////@ sourceURL="+d)};var v={},t=n.signal=function(b,a){var e=v[b];j(e&&e.slice(0),function(b){b.apply(null,d(a)?a:[a])})},H=n.on=function(b,d){var a=v[b]||(v[b]=[]);a.push(d);
return{remove:function(){for(var b=0;b<a.length;b++)if(a[b]===d){a.splice(b,1);break}}}},ia=[],za={},ja=[],T={},ka=n.map={},I=[],x={},U="",D={},J={};r={};var L=function(b){var d,a,e,j;for(d in J)a=J[d],(e=d.match(/^url\:(.+)/))?D["url:"+la(e[1],b)]=a:"*now"==d?j=a:"*noref"!=d&&(e=K(d,b),D[e.mid]=D["url:"+e.url]=a);j&&j(V(b));J={}},ma=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},W=function(b,d){d.splice(0,d.length);for(var a in b)d.push([a,b[a],RegExp("^"+
ma(a)+"(/|$)"),a.length]);d.sort(function(b,d){return d[3]-b[3]});return d},na=function(b){var d=b.name;d||(d=b,b={name:d});b=m({main:"main"},b);b.location=b.location?b.location:d;if(b.packageMap)ka[d]=b.packageMap;if(!b.main.indexOf("./"))b.main=b.main.substring(2);T[d]=b},oa=[],F=function(d,a,e){for(var c in d){if("waitSeconds"==c)n.waitms=1E3*(d[c]||0);"cacheBust"==c&&(U=d[c]?b(d[c])?d[c]:(new Date).getTime()+"":"");if("baseUrl"==c||"combo"==c)n[c]=d[c];d[c]!==p&&(n.rawConfig[c]=d[c],"has"!=c&&
s.add("config-"+c,d[c],0,a))}if(!n.baseUrl)n.baseUrl="./";/\/$/.test(n.baseUrl)||(n.baseUrl+="/");for(c in d.has)s.add(c,d.has[c],0,a);j(d.packages,na);for(i in d.packagePaths)j(d.packagePaths[i],function(d){var a=i+"/"+d;b(d)&&(d={name:d});d.location=a;na(d)});W(m(ka,d.map),I);j(I,function(b){b[1]=W(b[1],[]);if("*"==b[0])I.star=b});W(m(za,d.paths),ja);j(d.aliases,function(d){b(d[0])&&(d[0]=RegExp("^"+ma(d[0])+"$"));ia.push(d)});if(a)oa.push({config:d.config});else for(c in d.config)a=C(c,e),a.config=
m(a.config||{},d.config[c]);if(d.cache)L(),J=d.cache,d.cache["*noref"]&&L();t("config",[d,n.rawConfig])};n.rawConfig={};F(c,1);F(a,1);F(r,1);var M=function(b){X(function(){j(b.deps,pa)})},ha=function(a,e,j,c,h){var g;if(b(a)){if((g=C(a,c,!0))&&g.executed)return g.result;throw u("undefinedModule",a);}d(a)||(F(a,0,c),a=e,e=j);if(d(a))if(a.length){for(var j="require*"+q(),f,i=[],l=0;l<a.length;)f=a[l++],i.push(C(f,c));g=m(N("",j,0,""),{injected:2,deps:i,def:e||k,require:c?c.require:n,gc:1});x[g.mid]=
g;M(g);var o=G&&0!="sync";X(function(){Y(g,o)});g.executed||z.push(g);O()}else e&&e();return h},V=function(b){if(!b)return n;var d=b.require;if(!d)d=function(a,e,j){return ha(a,e,j,b,d)},b.require=m(d,n),d.module=b,d.toUrl=function(d){return la(d,b)},d.toAbsMid=function(d){return Z(d,b)};return d},z=[],P=[],y={},Ba=function(b){b.injected=1;y[b.mid]=1;b.url&&(y[b.url]=b.pack||1);Aa()},Q=function(b){b.injected=2;delete y[b.mid];b.url&&delete y[b.url];e(y)&&Ca()},Da=n.idle=function(){return!P.length&&
e(y)&&!z.length&&!G},$=function(b,d){if(d)for(var a=0;a<d.length;a++)if(d[a][2].test(b))return d[a];return 0},qa=function(b){for(var d=[],a,e,b=b.replace(/\\/g,"/").split("/");b.length;)a=b.shift(),".."==a&&d.length&&".."!=e?(d.pop(),e=d[d.length-1]):"."!=a&&d.push(e=a);return d.join("/")},N=function(b,d,a,e){return{pid:b,mid:d,pack:a,url:e,executed:0,def:0}},ra=function(b,d,a,e,c,h,k,f){var i,m,o,n;n=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||n&&!d)return N(0,b,0,b);b=qa(n?d.mid+"/../"+b:b);
if(/^\./.test(b))throw u("irrationalPath",b);d&&(o=$(d.mid,h));(o=(o=o||h.star)&&$(b,o[1]))&&(b=o[1]+b.substring(o[3]));d=(g=b.match(/^([^\/]+)(\/(.+))?$/))?g[1]:"";(i=a[d])?b=d+"/"+(m=g[3]||i.main):d="";var q=0;j(ia,function(d){var a=b.match(d[0]);a&&0<a.length&&(q=l(d[1])?b.replace(d[0],d[1]):d[1])});if(q)return ra(q,0,a,e,c,h,k,f);if(a=e[b])return f?N(a.pid,a.mid,a.pack,a.url):e[b];e=(o=$(b,k))?o[1]+b.substring(o[3]):d?i.location+"/"+m:b;/(^\/)|(\:)/.test(e)||(e=c+e);return N(d,b,i,qa(e+".js"))},
K=function(b,d){return ra(b,d,T,x,n.baseUrl,I,ja)},sa=function(b,d,a){return b.normalize?b.normalize(d,function(b){return Z(b,a)}):Z(d,a)},ta=0,C=function(b,d,a){var e,j;(e=b.match(/^(.+?)\!(.*)$/))?(j=C(e[1],d,a),5===j.executed&&!j.load&&aa(j),j.load?(e=sa(j,e[2],d),b=j.mid+"!"+(j.dynamic?++ta+"!":"")+e):(e=e[2],b=j.mid+"!"+ ++ta+"!waitingForPlugin"),b={plugin:j,mid:b,req:V(d),prid:e}):b=K(b,d);return x[b.mid]||!a&&(x[b.mid]=b)},Z=n.toAbsMid=function(b,d){return K(b,d).mid},la=n.toUrl=function(b,
d){var a=K(b+"/x",d),e=a.url;return ua(0===a.pid?b:e.substring(0,e.length-5))},va={injected:2,executed:5,def:3,result:3},E=function(b){return x[b]=m({mid:b},va)},Ea=E("require"),Fa=E("exports"),Ga=E("module"),R={},ba=0,aa=function(b){var d=b.result;b.dynamic=d.dynamic;b.normalize=d.normalize;b.load=d.load;return b},Ha=function(b){var d={};j(b.loadQ,function(a){var e=sa(b,a.prid,a.req.module),j=b.dynamic?a.mid.replace(/waitingForPlugin$/,e):b.mid+"!"+e,e=m(m({},a),{mid:j,prid:e,injected:0});x[j]||
wa(x[j]=e);d[a.mid]=x[j];Q(a);delete x[a.mid]});b.loadQ=0;var a=function(b){for(var a=b.deps||[],e=0;e<a.length;e++)(b=d[a[e].mid])&&(a[e]=b)},e;for(e in x)a(x[e]);j(z,a)},ca=function(b){n.trace("loader-finish-exec",[b.mid]);b.executed=5;b.defOrder=ba++;b.loadQ&&(aa(b),Ha(b));for(f=0;f<z.length;)z[f]===b?z.splice(f,1):f++;/^require\*/.test(b.mid)&&delete x[b.mid]},Ia=[],Y=function(b,d){if(4===b.executed)return n.trace("loader-circular-dependency",[Ia.concat(b.mid).join("->")]),!b.def||d?R:b.cjs&&
b.cjs.exports;if(!b.executed){if(!b.def)return R;var a=b.mid,e=b.deps||[],j,c=[],h=0;for(b.executed=4;h<e.length;){j=e[h++];j=j===Ea?V(b):j===Fa?b.cjs.exports:j===Ga?b.cjs:Y(j,d);if(j===R)return b.executed=0,n.trace("loader-exec-module",["abort",a]),R;c.push(j)}n.trace("loader-run-factory",[b.mid]);a=b.def;c=l(a)?a.apply(null,c):a;b.result=void 0===c&&b.cjs?b.cjs.exports:c;ca(b)}return b.result},G=0,X=function(b){try{G++,b()}finally{G--}Da()&&t("idle",[])},O=function(){G||X(function(){for(var b,d,
a=0;a<z.length;)b=ba,d=z[a],Y(d),b!=ba?a=0:a++})};void 0===s("dojo-loader-eval-hint-url")&&s.add("dojo-loader-eval-hint-url",1);var ua=function(b){b+="";return b+(U?(/\?/.test(b)?"&":"?")+U:"")},wa=function(b){var d=b.plugin;5===d.executed&&!d.load&&aa(d);var a=function(d){b.result=d;Q(b);ca(b);O()};d.load?d.load(b.prid,b.req,a):d.loadQ?d.loadQ.push(b):(d.loadQ=[b],z.unshift(d),pa(d))},S=0,da=0,ea=0,Ja=function(b,d){s("config-stripStrict")&&(b=b.replace(/"use strict"/g,""));ea=1;b===S?S.call(null):
n.eval(b,s("dojo-loader-eval-hint-url")?d.url:d.mid);ea=0},pa=function(b){var d=b.mid,a=b.url;if(!b.executed&&!b.injected&&!(y[d]||b.url&&(b.pack&&y[b.url]===b.pack||1==y[b.url])))if(Ba(b),b.plugin)wa(b);else{var e=function(){Ka(b);2!==b.injected&&(Q(b),m(b,va),n.trace("loader-define-nonmodule",[b.url]));O()};(S=D[d]||D["url:"+b.url])?(n.trace("loader-inject",["cache",b.mid,a]),Ja(S,b),e()):(n.trace("loader-inject",["script",b.mid,a]),da=b,n.injectUrl(ua(a),e,b),da=0)}},fa=function(b,d,a){n.trace("loader-define-module",
[b.mid,d]);if(2===b.injected)return t("error",u("multipleDefine",b)),b;m(b,{deps:d,def:a,cjs:{id:b.mid,uri:b.url,exports:b.result={},setExports:function(d){b.cjs.exports=d},config:function(){return b.config}}});for(var e=0;e<d.length;e++)d[e]=C(d[e],b);Q(b);if(!l(a)&&!d.length)b.result=a,ca(b);return b},Ka=function(b,d){for(var a=[],e,c;P.length;)c=P.shift(),d&&(c[0]=d.shift()),e=c[0]&&C(c[0])||b,a.push([e,c[1],c[2]]);L(b);j(a,function(b){M(fa.apply(null,b))})},Ca=k,Aa=k;s.add("ie-event-behavior",
!!B.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ga=function(b,d,a,e){if(s("ie-event-behavior"))return b.attachEvent(a,e),function(){b.detachEvent(a,e)};b.addEventListener(d,e,!1);return function(){b.removeEventListener(d,e,!1)}},La=ga(window,"load","onload",function(){n.pageLoaded=1;"complete"!=B.readyState&&(B.readyState="complete");La()}),xa=B.getElementsByTagName("script")[0],Ma=xa.parentNode;n.injectUrl=function(b,d,a){var a=a.node=B.createElement("script"),
e=ga(a,"load","onreadystatechange",function(b){var b=b||window.event,a=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(a.readyState))e(),j(),d&&d()}),j=ga(a,"error","onerror",function(d){e();j();t("error",u("scriptError",[b,d]))});a.type="text/javascript";a.charset="utf-8";a.src=b;Ma.insertBefore(a,xa);return a};n.log=k;n.trace=k;E=function(d,a,e){var j=arguments.length,c=["require","exports","module"],h=[0,d,a];1==j?h=[0,l(d)?c:[],d]:2==j&&b(d)?h=[d,l(a)?c:[],a]:3==j&&(h=[d,a,e]);
n.trace("loader-define",h.slice(0,2));if((j=h[0]&&C(h[0]))&&!y[j.mid])M(fa(j,h[1],h[2]));else if(!s("ie-event-behavior")||ea)P.push(h);else{j=j||da;if(!j)for(d in y)if((c=x[d])&&c.node&&"interactive"===c.node.readyState){j=c;break}j?(L(j),M(fa(j,h[1],h[2]))):t("error",u("ieDefineFailed",h[0]));O()}};E.amd={vendor:"dojotoolkit.org"};m(m(n,c.loaderPatch),a.loaderPatch);H("error",function(b){try{if(console.error(b),b instanceof Error)for(var d in b);}catch(a){}});m(n,{uid:q,cache:D,packs:T});if(!A.define)A.define=
E,A.require=n,j(oa,function(b){F(b)}),H=r.deps||a.deps||c.deps,r=r.callback||a.callback||c.callback,n.boot=H||r?[H||[],r]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../frozen",main:"GameCore",name:"frozen"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"}]});
require({cache:{"dist/frozen":function(){define([],1)},"frozen/box2d/Box":function(){define("frozen/box2d/Box",["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,c){var g=Box2D.Common.Math.b2Vec2,f=Box2D.Dynamics.b2BodyDef,i=Box2D.Dynamics.b2Body,k=Box2D.Dynamics.b2FixtureDef,e=Box2D.Dynamics.b2World,h=Box2D.Collision.Shapes.b2PolygonShape,l=Box2D.Collision.Shapes.b2CircleShape;return a(c,{intervalRate:60,adaptive:!1,bodiesMap:null,fixturesMap:null,jointsMap:null,b2World:null,gravityX:0,gravityY:9.8,
allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,scale:30,constructor:function(b){if(b&&b.intervalRate)this.intervalRate=parseInt(b.intervalRate,10);this.bodiesMap={};this.fixturesMap={};this.jointsMap={};this.b2World=new e(new g(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(b){if(this.resolveCollisions)this.collisions={};var d=Date.now();b?this.b2World.Step(b/1E3,10,10):this.b2World.Step(this.adaptive?
(d-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.b2World.ClearForces();return Date.now()-d},getState:function(){for(var b={},d=this.b2World.GetBodyList();d;d=d.m_next)if(d.IsActive()&&"undefined"!==typeof d.GetUserData()&&null!==d.GetUserData()&&(b[d.GetUserData()]={x:d.GetPosition().x,y:d.GetPosition().y,angle:d.GetAngle(),center:{x:d.GetWorldCenter().x,y:d.GetWorldCenter().y},linearVelocity:d.m_linearVelocity,angularVelocity:d.m_angularVelocity},this.resolveCollisions))b[d.GetUserData()].collisions=
this.collisions[d.GetUserData()]||null;return b},updateExternalState:function(b){var d=this.getState(),a;for(a in d){var e=b[a];e&&!e.staticBody&&e.update(d[a])}},setBodies:function(b){for(var d in b)this.addBody(b[d]);this.ready=!0},addBody:function(b){if(!b.alreadyScaled)b.scaleShape(1/this.scale),b.scale=this.scale;var d=new f,a=new k,e,c,o,q;a.restitution=b.restitution;a.density=b.density;a.friction=b.friction;if(b.hasOwnProperty("maskBits"))a.filter.maskBits=b.maskBits;if(b.hasOwnProperty("categoryBits"))a.filter.categoryBits=
b.categoryBits;if(b.hasOwnProperty("groupIndex"))a.filter.groupIndex=b.groupIndex;d.type=b.staticBody?i.b2_staticBody:i.b2_dynamicBody;d.position.x=b.x;d.position.y=b.y;d.userData=b.id;d.angle=b.angle;d.linearDamping=b.linearDamping;d.angularDamping=b.angularDamping;var n=this.b2World.CreateBody(d);if(b.radius)a.shape=new l(b.radius),n.CreateFixture(a);else if(b.points){c=[];for(d=0;d<b.points.length;d++)o=new g,o.Set(b.points[d].x,b.points[d].y),c[d]=o;a.shape=new h;a.shape.SetAsArray(c,c.length);
n.CreateFixture(a)}else if(b.polys)for(e=0;e<b.polys.length;e++){c=b.polys[e];q=[];for(d=0;d<c.length;d++)o=new g,o.Set(c[d].x,c[d].y),q[d]=o;a.shape=new h;a.shape.SetAsArray(q,q.length);n.CreateFixture(a)}else a.shape=new h,a.shape.SetAsBox(b.halfWidth,b.halfHeight),n.CreateFixture(a);this.bodiesMap[b.id]=n},setPosition:function(b,d,a){this.bodiesMap[b].SetPosition(new g(d,a))},setAngle:function(b,d){this.bodiesMap[b].SetAngle(d)},setLinearVelocity:function(b,d,a){this.bodiesMap[b].SetLinearVelocity(new g(d,
a))},applyImpulseDegrees:function(b,d,a){b=this.bodiesMap[b];b.ApplyImpulse(new g(Math.sin(d*(Math.PI/180))*a,-1*Math.cos(d*(Math.PI/180))*a),b.GetWorldCenter())},applyForceDegrees:function(b,d,a){b=this.bodiesMap[b];b.ApplyForce(new g(Math.sin(d*(Math.PI/180))*a,-1*Math.cos(d*(Math.PI/180))*a),b.GetWorldCenter())},applyImpulse:function(b,d,a){b=this.bodiesMap[b];b.ApplyImpulse(new g(Math.sin(d)*a,-1*Math.cos(d)*a),b.GetWorldCenter())},applyForce:function(b,d,a){b=this.bodiesMap[b];b.ApplyForce(new g(Math.sin(d)*
a,-1*Math.cos(d)*a),b.GetWorldCenter())},applyTorque:function(b,d){this.bodiesMap[b].ApplyTorque(d)},setGravity:function(b){this.b2World.SetGravity(new g(b.x,b.y))},removeBody:function(b){this.bodiesMap[b]&&(this.fixturesMap[b]&&this.bodiesMap[b].DestroyFixture(this.fixturesMap[b]),this.b2World.DestroyBody(this.bodiesMap[b]),delete this.bodiesMap[b])},wakeUpBody:function(b){this.bodiesMap[b]&&this.bodiesMap[b].SetAwake(!0)},addContactListener:function(b){var d=new Box2D.Dynamics.b2ContactListener;
if(b.beginContact)d.BeginContact=function(d){b.beginContact(d.GetFixtureA().GetBody().GetUserData(),d.GetFixtureB().GetBody().GetUserData())};if(b.endContact)d.endContact=function(d){b.endContact(d.GetFixtureA().GetBody().GetUserData(),d.GetFixtureB().GetBody().GetUserData())};if(b.postSolve)d.PostSolve=function(d,a){b.postSolve(d.GetFixtureA().GetBody().GetUserData(),d.GetFixtureB().GetBody().GetUserData(),a.normalImpulses[0])};this.b2World.SetContactListener(d)},destroyJoint:function(b){this.jointsMap[b]&&
(this.b2World.DestroyJoint(this.jointsMap[b]),delete this.jointsMap[b])},addJoint:function(b){if(b&&b.id&&!this.jointsMap[b.id]){if(!b.alreadyScaled&&b.scaleJointLocation)b.scaleJointLocation(1/this.scale),b.scale=this.scale;var d=b.createB2Joint(this);d&&(this.jointsMap[b.id]=d)}},beginContact:function(){},endContact:function(){},postSolve:function(b,d,a){this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:d,impulse:a});this.collisions[d]=this.collisions[d]||[];this.collisions[d].push({id:b,
impulse:a})}})})},"dcl/dcl":function(){(function(a){"undefined"!=typeof define?define(["./mini"],a):"undefined"!=typeof module?module.exports=a(require("./mini")):dcl=a(dcl)})(function(a){function c(){}function g(a,e,h){var g=a||c,b=e||c,d=h||c,j=function(){var a;g.apply(this,arguments);try{a=d.apply(this,arguments)}catch(e){a=e}b.call(this,arguments,a);if(a instanceof Error)throw a;return a};j.advices={b:a,a:e,f:h};return j}function f(c){return function(e,h){var g=e._m,b;g&&((b=+g.w[h]||0)&&b!=c&&
a._e("set chaining",h,e,c,b),g.w[h]=c)}}var i=a(a.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});a.mix(a,{Advice:i,advise:function(a){return new i(a)},before:function(a){return new i({before:a})},after:function(a){return new i({after:a})},around:a.superCall,chainBefore:f(1),chainAfter:f(2),isInstanceOf:function(a,e){if(a instanceof e)return!0;var c=a.constructor._m,g;if(c)for(c=c.b,g=c.length-1;0<=g;--g)if(c[g]===e)return!0;return!1},_sb:function(c,
e,h,f){var f=f[h]=a._ec(e,h,"f"),b=a._ec(e,h,"b").reverse(),e=a._ec(e,h,"a"),f=c?a._st(f,1==c?function(b){return a._sc(b.reverse())}:a._sc,h):a._ss(f,h);return!b.length&&!e.length?f||function(){}:g(a._sc(b),a._sc(e),f)}});return a})},"dcl/mini":function(){(function(a){"undefined"!=typeof define?define([],a):"undefined"!=typeof module?module.exports=a():dcl=a()})(function(){function a(b,d){var e=[0],c,j,h,m,s,p,r,w,v=0,t;if(b)if(b instanceof Array){m={};r=b.slice(0).reverse();for(w=r.length-1;0<=w;--w)if(j=
r[w],j._u=j._u||f++,c=j._m){for(p=c.b,v=p.length-1;0<v;--v)t=p[v]._u,m[t]=(m[t]||0)+1;r[w]=p.slice(0)}else r[w]=[j];s={};a:for(;r.length;){for(w=0;w<r.length;++w)if(p=r[w],j=p[0],t=j._u,!m[t]){s[t]||(e.push(j),s[t]=1);p.shift();p.length?--m[p[0]._u]:r.splice(w,1);continue a}a._e("cycle",d,r)}b=b[0];v=e.length-((m=b._m)&&b===e[e.length-(v=m.b.length)]?v:1)-1}else b._u=b._u||f++,e=e.concat((m=b._m)?m.b:b);c=b?a.delegate(b[k]):{};for(p=b&&(m=b._m)?a.delegate(m.w):{constructor:2};0<v;--v)if(j=e[v],m=
j._m,l(c,m&&m.h||j[k]),m)for(t in r=m.w)p[t]=(+p[t]||0)|r[t];for(t in d)g(m=d[t])?p[t]=+p[t]||0:c[t]=m;s={b:e,h:d,w:p,c:{}};e[0]={_m:s,prototype:c};j=c;m=s.w;p=s.b;r=s.c;for(h in m)j[h]=a._sb(m[h],p,h,r);h=c[i];h._m=s;h[k]=c;e[0]=h;return a._p(h)}function c(b){this.f=b}function g(b){return b instanceof c}var f=0,i="constructor",k="prototype",e=function(){},h={},l,b,d,j,m;(l=function(b,d){for(var a in d)b[a]=d[a]})(a,{mix:l,delegate:function(b){e[k]=b;b=new e;e[k]=null;return b},Super:c,superCall:function(b){return new c(b)},
_p:function(b){return b},_e:function(b){throw Error("dcl: "+b);},_f:function(b,d){var a=b.f(d);a.ctr=b.ctr;return a},_ec:b=function(b,d,a){for(var e=b.length-1,c=[],j,f,i="f"==a;j=b[e];--e)if((f=j._m)?(f=f.h).hasOwnProperty(d)&&(g(f=f[d])?i?f.f:f=f[a]:i):i&&(f=j[k][d])&&f!==h[d])f.ctr=j,c.push(f);return c},_sc:j=function(b){var d=b.length,a;return!d?0:1==d?(a=b[0],function(){a.apply(this,arguments)}):function(){for(var a=0;a<d;++a)b[a].apply(this,arguments)}},_ss:d=function(b,d){for(var e=0,c,j=h[d];c=
b[e];++e)j=g(c)?b[e]=a._f(c,j,d):c;return d!=i?j:function(){j.apply(this,arguments)}},_st:m=function(b,d,e){for(var c=0,j,h,f=0;j=b[c];++c)g(j)&&(h=c-f,b[c]=a._f(j,!h?0:1==h?b[f]:d(b.slice(f,c)),e),f=c);h=c-f;return!h?0:1==h&&e!=i?b[f]:d(f?b.slice(f):b)},_sb:function(a,e,c,h){e=h[c]=b(e,c,"f");return(a?m(e,j,c):d(e,c))||function(){}}});return a})},"dcl/bases/Mixer":function(){(function(a){"undefined"!=typeof define?define(["../mini"],a):"undefined"!=typeof module?module.exports=a(require("../mini")):
dclBasesMixer=a(dcl)})(function(a){return a(null,{declaredClass:"dcl/bases/Mixer",constructor:function(c){a.mix(this,c)}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,c){c.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var g=c("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],f=g.length,i=function(b,d,e){var c,h=0,f=a.global;if(!e)if(b.length){c=
b[h++];try{e=a.scopeMap[c]&&a.scopeMap[c][1]}catch(g){}e=e||(c in f?f[c]:d?f[c]={}:void 0)}else return f;for(;e&&(c=b[h++]);)e=c in e?e[c]:d?e[c]={}:void 0;return e},k=Object.prototype.toString,e=function(b,d,a){return(a||[]).concat(Array.prototype.slice.call(b,d||0))},h=/\{([^\}]+)\}/g,l={_extraNames:g,_mixin:function(b,d,a){var e,h,i,k={};for(e in d)if(h=d[e],!(e in b)||b[e]!==h&&(!(e in k)||k[e]!==h))b[e]=a?a(h):h;if(c("bug-for-in-skips-shadowed")&&d)for(i=0;i<f;++i)if(e=g[i],h=d[e],!(e in b)||
b[e]!==h&&(!(e in k)||k[e]!==h))b[e]=a?a(h):h;return b},mixin:function(b,d){b||(b={});for(var a=1,e=arguments.length;a<e;a++)l._mixin(b,arguments[a]);return b},setObject:function(b,d,a){var e=b.split("."),b=e.pop();return(a=i(e,!0,a))&&b?a[b]=d:void 0},getObject:function(b,d,a){return i(b.split("."),d,a)},exists:function(b,d){return void 0!==l.getObject(b,!1,d)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&(b instanceof Array||"array"==typeof b)},
isFunction:function(b){return"[object Function]"===k.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||l.isArray(b)||l.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!l.isString(b)&&!l.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(l.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!l.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(""+b)},extend:function(b,d){for(var a=1,e=arguments.length;a<e;a++)l._mixin(b.prototype,arguments[a]);
return b},_hitchArgs:function(b,d){var e=l._toArray(arguments,2),c=l.isString(d);return function(){var h=l._toArray(arguments),f=c?(b||a.global)[d]:d;return f&&f.apply(b||this,e.concat(h))}},hitch:function(b,d){if(2<arguments.length)return l._hitchArgs.apply(a,arguments);d||(d=b,b=null);if(l.isString(d)){b=b||a.global;if(!b[d])throw['lang.hitch: scope["',d,'"] is null (scope="',b,'")'].join("");return function(){return b[d].apply(b,arguments||[])}}return!b?d:function(){return d.apply(b,arguments||
[])}},delegate:function(){function b(){}return function(d,a){b.prototype=d;var e=new b;b.prototype=null;a&&l._mixin(e,a);return e}}(),_toArray:c("ie")?function(){function b(b,a,e){e=e||[];for(a=a||0;a<b.length;a++)e.push(b[a]);return e}return function(d){return(d.item?b:e).apply(this,arguments)}}():e,partial:function(b){return l.hitch.apply(a,[null].concat(l._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||l.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);
if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var d,a,e;if(l.isArray(b)){d=[];for(a=0,e=b.length;a<e;++a)a in b&&d.push(l.clone(b[a]))}else d=b.constructor?new b.constructor:{};return l._mixin(d,b,l.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,a,e){return b.replace(e||h,l.isFunction(a)?a:function(b,e){return l.getObject(e,!1,a)})}};l.mixin(a,l);return l})},
"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,c,g,f){var i,a={},k={},e={config:c,global:this,dijit:a,dojox:k},a={dojo:["dojo",e],dijit:["dijit",a],dojox:["dojox",k]},f=g.map&&g.map[f.id.match(/[^\/]+/)[0]];for(i in f)a[i]?a[i][0]=f[i]:a[i]=[f[i],{}];for(i in a)f=a[i],f[1]._scopeName=f[0],c.noGlobals||(this[f[0]]=f[1]);e.scopeMap=a;e.baseUrl=e.config.baseUrl=g.baseUrl;e.isAsync=g.async;e.locale=c.locale;c="$Rev: 30226 $".match(/\d+/);e.version={major:1,minor:8,
patch:3,flag:"",revision:c?+c[0]:NaN,toString:function(){var a=e.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};e.deprecated=e.experimental=function(){};e._hasResource={};return e})},"dojo/has":function(){define(["require","module"],function(a){var c=a.has||function(){};c.add("touch","ontouchstart"in document);c.add("device-width",screen.availWidth||
innerWidth);a=document.createElement("form");c.add("dom-attributes-explicit",0==a.attributes.length);c.add("dom-attributes-specified-flag",0<a.attributes.length&&40>a.attributes.length);c.clearElement=function(a){a.innerHTML="";return a};c.normalize=function(a,f){var i=a.match(/[\?:]|[^:\?]*/g),k=0,e=function(a){var f=i[k++];if(":"==f)return 0;if("?"==i[k++]){if(!a&&c(f))return e();e(!0);return e(a)}return f||0};return(a=e())&&f(a)};c.load=function(a,c,i){a?c([a],i):i()};return c})},"dojo/_base/config":function(){define(["../has",
"require"],function(a,c){var g={},f=c.rawConfig,i;for(i in f)g[i]=f[i];return g})},"dojo/sniff":function(){define(["./has"],function(a){var c=navigator,g=c.userAgent,c=c.appVersion,f=parseFloat(c);a.add("air",0<=g.indexOf("AdobeAIR"));a.add("khtml",0<=c.indexOf("Konqueror")?f:void 0);a.add("webkit",parseFloat(g.split("WebKit/")[1])||void 0);a.add("chrome",parseFloat(g.split("Chrome/")[1])||void 0);a.add("safari",0<=c.indexOf("Safari")&&!a("chrome")?parseFloat(c.split("Version/")[1]):void 0);a.add("mac",
0<=c.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);a.add("ios",/iPhone|iPod|iPad/.test(g));a.add("android",parseFloat(g.split("Android ")[1])||void 0);if(!a("webkit")){0<=g.indexOf("Opera")&&a.add("opera",9.8<=f?parseFloat(g.split("Version/")[1])||f:f);0<=g.indexOf("Gecko")&&!a("khtml")&&!a("webkit")&&a.add("mozilla",f);a("mozilla")&&a.add("ff",parseFloat(g.split("Firefox/")[1]||g.split("Minefield/")[1])||void 0);if(document.all&&!a("opera"))g=parseFloat(c.split("MSIE ")[1])||
void 0,(c=document.documentMode)&&5!=c&&Math.floor(g)!=c&&(g=c),a.add("ie",g);a.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return a})},"frozen/box2d/BoxGame":function(){define("frozen/box2d/BoxGame",["../GameCore","./Box","dcl","dcl/bases/Mixer"],function(a,c,g,f){return g([a,f],{box:null,boxUpdating:!0,entities:null,constructor:function(){if(!this.box)this.box=new c;if(!this.entities)this.entities={}},preUpdate:function(a){this.boxUpdating&&(this.box.update(a),this.box.updateExternalState(this.entities))}})})},
"frozen/GameCore":function(){define("frozen/GameCore","dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),function(a,c,g,f,i,k){return a(c,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,setHeight:function(a){this.height=a;this.canvas.height=a},setWidth:function(a){this.width=a;
this.canvas.width=a},stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=f.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.setHeight(this.height||this.canvas.height);this.setWidth(this.width||this.canvas.width);if(!this.inputManager)this.inputManager=
this.gameAreaId&&this.canvasPercentage?new i({canvas:this.canvas,gameArea:f.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new i({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new k;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},
initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||(this.preUpdate(this.elapsedTime),this.update(this.elapsedTime)),this.context.save(),this.draw(this.context),
this.context.restore())},launchLoop:function(){this.elapsedTime=0;var a=Date.now();this.prevTime=this.currTime=a;this.loopRunner=g.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},preUpdate:function(){},update:function(){},updateLoadingScreen:function(){},draw:function(a){if("2d"===this.contextType)a.font="14px sans-serif",a.fillText("This game does not have its own draw function!",10,50)},
drawLoadingScreen:function(a){if(this.resourceManager&&"2d"===this.contextType)a.fillStyle=this.loadingBackground,a.fillRect(0,0,this.width,this.height),a.fillStyle=this.loadingForeground,a.strokeStyle=this.loadingForeground,a.font="bold "+Math.floor(this.height/12)+"px sans-serif",a.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),a.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),a.fillRect(0.1*this.width,0.7*this.height,
0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),a.lineWidth=4}})})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(a,c){if(7>=a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}var f={};f.byId=a("ie")?function(a,e){if("string"!=typeof a)return a;var h=e||c.doc,f=a&&h.getElementById(a);if(f&&(f.attributes.id.value==a||f.id==a))return f;h=h.all[a];if(!h||h.nodeName)h=[h];for(var b=0;f=h[b++];)if(f.attributes&&f.attributes.id&&f.attributes.id.value==
a||f.id==a)return f}:function(a,e){return("string"==typeof a?(e||c.doc).getElementById(a):a)||null};f.isDescendant=function(a,e){try{a=f.byId(a);for(e=f.byId(e);a;){if(a==e)return!0;a=a.parentNode}}catch(c){}return!1};a.add("css-user-select",function(a,e,c){if(!c)return!1;var a=c.style,e=["Khtml","O","ms","Moz","Webkit"],c=e.length,f="userSelect";do if("undefined"!==typeof a[f])return f;while(c--&&(f=e[c]+"UserSelect"));return!1});var i=a("css-user-select");f.setSelectable=i?function(a,e){f.byId(a).style[i]=
e?"":"none"}:function(a,e){var a=f.byId(a),c=a.getElementsByTagName("*"),g=c.length;if(e)for(a.removeAttribute("unselectable");g--;)c[g].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");g--;)c[g].setAttribute("unselectable","on")};return f})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(a,c,g){var f={global:a.global,doc:this.document||null,body:function(c){c=c||a.doc;return c.body||c.getElementsByTagName("body")[0]},setContext:function(c,
g){a.global=f.global=c;a.doc=f.doc=g},withGlobal:function(c,g,e,h){var l=a.global;try{return a.global=f.global=c,f.withDoc.call(null,c.document,g,e,h)}finally{a.global=f.global=l}},withDoc:function(c,k,e,h){var l=f.doc,b=g("quirks"),d=g("ie"),j,m,u;try{a.doc=f.doc=c;a.isQuirks=g.add("quirks","BackCompat"==a.doc.compatMode,!0,!0);if(g("ie")&&(u=c.parentWindow)&&u.navigator)j=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,(m=c.documentMode)&&5!=m&&Math.floor(j)!=m&&(j=m),a.isIE=g.add("ie",
j,!0,!0);e&&"string"==typeof k&&(k=e[k]);return k.apply(e,h||[])}finally{a.doc=f.doc=l,a.isQuirks=g.add("quirks",b,!0,!0),a.isIE=g.add("ie",d,!0,!0)}}};c.mixin(a,f);return f})},"frozen/InputManager":function(){define("frozen/InputManager","./GameAction,./MouseAction,./utils/insideCanvas,dcl,dcl/bases/Mixer,dojo/has,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),function(a,c,g,f,i,k,e,h,l,b){return f(i,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,
handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(e(document,"keydown",b.hitch(this,"keyDown")),e(document,"keyup",b.hitch(this,"keyReleased")));this.handleMouse&&!k("touch")&&(e(document,"mousedown",b.hitch(this,"mouseDown")),e(document,"mousemove",b.hitch(this,"mouseMove")),e(document,"mouseup",b.hitch(this,"mouseUp")));this.handleTouch&&k("touch")&&(e(document,"touchstart",b.hitch(this,"touchStart")),e(document,"touchmove",
b.hitch(this,"touchMove")),e(document,"touchend",b.hitch(this,"touchEnd")));if(!this.mouseAction)this.mouseAction=new c;if(!this.touchAction)this.touchAction=new c;this.gameArea&&this.canvasPercentage&&(e(window,"resize",b.hitch(this,"resize")),e(window,"orientationchange",b.hitch(this,"resize")))},mapToKey:function(b,a){if(!this.keyActions)this.keyActions=[];this.keyActions[a]=b},addKeyAction:function(b,e){var c=new a;if(e)c.behavior=c.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(c,b);return c},
setMouseAction:function(b){this.mouseAction=b},setTouchAction:function(b){this.touchAction=b},mouseUp:function(b){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(b)},mouseDown:function(b){b=this.getMouseLoc(b);this.mouseAction.endPosition=null;this.mouseAction.insideCanvas=g(b,this.canvas);this.mouseAction.insideCanvas?(this.mouseAction.press(),this.mouseAction.startPosition=b,this.mouseAction.position=b):this.mouseAction.startPosition=null},mouseMove:function(b){this.mouseAction.position=
this.getMouseLoc(b)},touchStart:function(b){b=this.getMouseLoc(b.changedTouches[0]);this.touchAction.endPosition=null;this.touchAction.insideCanvas=g(b,this.canvas);this.touchAction.insideCanvas?(this.touchAction.press(),this.touchAction.startPosition=b,this.touchAction.position=b):this.touchAction.startPosition=null},touchEnd:function(b){this.touchAction.release();this.touchAction.endPosition=this.getMouseLoc(b.changedTouches[0])},touchMove:function(b){this.touchAction.position=this.getMouseLoc(b.changedTouches[0]);
this.touchAction.startPosition&&b.preventDefault()},getKeyAction:function(b){return this.keyActions.length?this.keyActions[b.keyCode]||this.keyActions[String.fromCharCode(b.keyCode)]:null},keyPressed:function(b){(b=this.getKeyAction(b))&&!b.isPressed()&&b.press()},keyDown:function(b){(b=this.getKeyAction(b))&&!b.isPressed()&&b.press()},keyReleased:function(b){(b=this.getKeyAction(b))&&b.release()},getMouseLoc:function(b){var a=l.position(this.canvas);return this.zoomRatio?{x:Math.round((b.clientX-
a.x)/this.zoomRatio),y:Math.round((b.clientY-a.y)/this.zoomRatio)}:{x:Math.round(b.clientX-a.x),y:Math.round(b.clientY-a.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var b=this.canvas.width,a=this.canvas.height,e=l.getMarginExtents(document.body),c=window.innerWidth-e.w,e=window.innerHeight-e.h,a=b/a,f="",g="";c/e>a?(c=e*a,f=c+"px"):g=Math.round(c/a)+"px";this.zoomRatio=c/b*this.canvasPercentage;h.set(this.gameArea,{width:f,height:g});b=Math.floor(100*this.canvasPercentage)+
"%";h.set(this.canvas,{width:b,height:b,display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define("frozen/GameAction",["dcl","dcl/bases/Mixer"],function(a,c){return a(c,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},reset:function(){this.state=this.statics.STATE_RELEASED;
this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(a){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=a,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var a=this.amount;
if(0!==a)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return a}})})},"frozen/MouseAction":function(){define("frozen/MouseAction",["dcl","dcl/bases/Mixer","./GameAction"],function(a,c,g){return a([c,g],{startPosition:null,endPosition:null,position:null})})},"frozen/utils/insideCanvas":function(){define("frozen/utils/insideCanvas",function(){return function(a,c){return 0>
a.x||a.x>c.width||0>a.y||a.y>c.height?!1:!0}})},"dojo/on":function(){define(["require","./_base/kernel","./has"],function(a,c,g){function f(b,a,c,f,j){if(f=a.match(/(.*):(.*)/))return a=f[2],f=f[1],e.selector(f,a).call(j,b,c);g("touch")&&(h.test(a)&&(c=q(c)),!g("event-orientationchange")&&"orientationchange"==a&&(a="resize",b=window,c=q(c)));m&&(c=m(c));if(b.addEventListener){var i=a in d,k=i?d[a]:a;b.addEventListener(k,c,i);return{remove:function(){b.removeEventListener(k,c,i)}}}a="on"+a;throw Error("Target must be an event emitter");
}function i(){this.cancelable=!1}function k(){this.bubbles=!1}a=window.ScriptEngineMajorVersion;g.add("jscript",a&&a()+ScriptEngineMinorVersion()/10);g.add("event-orientationchange",g("touch")&&!g("android"));g.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var e=function(b,a,d,c){return"function"==typeof b.on&&"function"!=typeof a?b.on(a,d):e.parse(b,a,d,f,c,this)};e.pausable=function(b,a,d,c){var f,b=e(b,a,function(){if(!f)return d.apply(this,
arguments)},c);b.pause=function(){f=!0};b.resume=function(){f=!1};return b};e.once=function(b,a,d){var c=e(b,a,function(){c.remove();return d.apply(this,arguments)});return c};e.parse=function(b,a,d,e,c,f){if(a.call)return a.call(f,b,d);if(-1<a.indexOf(",")){for(var a=a.split(/\s*,\s*/),h=[],g=0,j;j=a[g++];)h.push(e(b,j,d,c,f));h.remove=function(){for(var b=0;b<h.length;b++)h[b].remove()};return h}return e(b,a,d,c,f)};var h=/^touch/;e.selector=function(b,a,d){return function(f,h){function g(a){for(j=
j&&j.matches?j:c.query;!j.matches(a,b,f);)if(a==f||!1===d||!(a=a.parentNode)||1!=a.nodeType)return;return a}var j="function"==typeof b?{matches:b}:this,i=a.bubble;return i?e(f,i(g),h):e(f,a,function(b){var a=g(b.target);return a&&h.call(a,b)})}};var l=[].slice,b=e.emit=function(b,a,d){var e=l.call(arguments,2),c="on"+a;if("parentNode"in b){var f=e[0]={},h;for(h in d)f[h]=d[h];f.preventDefault=i;f.stopPropagation=k;f.target=b;f.type=a;d=f}do b[c]&&b[c].apply(b,e);while(d&&d.bubbles&&(b=b.parentNode));
return d&&d.cancelable&&d},d={};if(!g("event-stopimmediatepropagation"))var j=function(){this.modified=this.immediatelyStopped=!0},m=function(b){return function(a){if(!a.immediatelyStopped)return a.stopImmediatePropagation=j,b.apply(this,arguments)}};d={focusin:"focus",focusout:"blur"};e.emit=function(a,d,c){if(a.dispatchEvent&&document.createEvent){var f=a.ownerDocument.createEvent("HTMLEvents");f.initEvent(d,!!c.bubbles,!!c.cancelable);for(var h in c)h in f||(f[h]=c[h]);return a.dispatchEvent(f)&&
f}return b.apply(e,arguments)};if(g("touch"))var u=function(){},o=window.orientation,q=function(b){return function(a){var d=a.corrected;if(!d){var e=a.type;try{delete a.type}catch(c){}a.type?(u.prototype=a,d=new u,d.preventDefault=function(){a.preventDefault()},d.stopPropagation=function(){a.stopPropagation()}):(d=a,d.type=e);a.corrected=d;if("resize"==e){if(o==window.orientation)return null;o=window.orientation;d.type="orientationchange";return b.call(this,d)}if(!("rotation"in d))d.rotation=0,d.scale=
1;var e=d.changedTouches[0],f;for(f in e)delete d[f],d[f]=e[f]}return b.call(this,d)}};return e})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(a,c){function g(e,c,f){c=c.toLowerCase();if(a("ie")){if("auto"==f){if("height"==c)return e.offsetHeight;if("width"==c)return e.offsetWidth}if("fontweight"==c)switch(f){case 700:return"bold";default:return"normal"}}c in b||(b[c]=d.test(c));return b[c]?k(e,f):f}var f,i={};f=a("webkit")?function(b){var a;if(1==b.nodeType){var d=
b.ownerDocument.defaultView;a=d.getComputedStyle(b,null);if(!a&&b.style)b.style.display="",a=d.getComputedStyle(b,null)}return a||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};i.getComputedStyle=f;var k;k=a("ie")?function(b,a){if(!a)return 0;if("medium"==a)return 4;if(a.slice&&"px"==a.slice(-2))return parseFloat(a);var d=b.style,e=b.runtimeStyle,c=d.left,
f=e.left;e.left=b.currentStyle.left;try{d.left=a,a=d.pixelLeft}catch(h){a=0}d.left=c;e.left=f;return a}:function(b,a){return parseFloat(a)||0};i.toPixelValue=k;var e=function(b,a){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){return a?{}:null}},h=9>a("ie")||10>a("ie")&&a("quirks")?function(b){try{return e(b).Opacity/100}catch(a){return 1}}:function(b){return f(b).opacity},l=9>a("ie")||10>a("ie")&&a("quirks")?function(b,a){var d=100*a,c=1==a;b.style.zoom=c?"":1;if(e(b))e(b,
1).Opacity=d;else{if(c)return a;b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+d+")"}e(b,1).Enabled=!c;if("tr"==b.tagName.toLowerCase())for(d=b.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&l(d,a);return a}:function(b,a){return b.style.opacity=a},b={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,j=a("ie")?"styleFloat":"cssFloat",m={cssFloat:j,styleFloat:j,"float":j};i.get=function(b,a){var d=c.byId(b),e=arguments.length;if(2==e&&"opacity"==a)return h(d);
var a=m[a]||a,f=i.getComputedStyle(d);return 1==e?f:g(d,a,f[a]||d.style[a])};i.set=function(b,a,d){var e=c.byId(b),f=arguments.length,h="opacity"==a,a=m[a]||a;if(3==f)return h?l(e,d):e.style[a]=d;for(var g in a)i.set(b,g,a[g]);return i.getComputedStyle(e)};return i})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(a,c,g,f){function i(b,a,e,c,f,h){h=h||"px";b=b.style;if(!isNaN(a))b.left=a+h;if(!isNaN(e))b.top=e+h;if(0<=c)b.width=
c+h;if(0<=f)b.height=f+h}function k(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function e(b){return"border-box"==h.boxModel||"table"==b.tagName.toLowerCase()||k(b)}var h={boxModel:"content-box"};if(a("ie"))h.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";h.getPadExtents=function(b,a){var b=g.byId(b),e=a||f.getComputedStyle(b),c=f.toPixelValue,h=c(b,e.paddingLeft),i=c(b,e.paddingTop),k=c(b,
e.paddingRight),e=c(b,e.paddingBottom);return{l:h,t:i,r:k,b:e,w:h+k,h:i+e}};h.getBorderExtents=function(b,a){var b=g.byId(b),e=f.toPixelValue,c=a||f.getComputedStyle(b),h="none"!=c.borderLeftStyle?e(b,c.borderLeftWidth):0,i="none"!=c.borderTopStyle?e(b,c.borderTopWidth):0,k="none"!=c.borderRightStyle?e(b,c.borderRightWidth):0,e="none"!=c.borderBottomStyle?e(b,c.borderBottomWidth):0;return{l:h,t:i,r:k,b:e,w:h+k,h:i+e}};h.getPadBorderExtents=function(b,a){var b=g.byId(b),e=a||f.getComputedStyle(b),
c=h.getPadExtents(b,e),e=h.getBorderExtents(b,e);return{l:c.l+e.l,t:c.t+e.t,r:c.r+e.r,b:c.b+e.b,w:c.w+e.w,h:c.h+e.h}};h.getMarginExtents=function(b,a){var b=g.byId(b),e=a||f.getComputedStyle(b),c=f.toPixelValue,h=c(b,e.marginLeft),i=c(b,e.marginTop),k=c(b,e.marginRight),e=c(b,e.marginBottom);return{l:h,t:i,r:k,b:e,w:h+k,h:i+e}};h.getMarginBox=function(b,d){var b=g.byId(b),e=d||f.getComputedStyle(b),c=h.getMarginExtents(b,e),i=b.offsetLeft-c.l,k=b.offsetTop-c.t,l=b.parentNode,n=f.toPixelValue;if(a("mozilla")){var A=
parseFloat(e.left),e=parseFloat(e.top);!isNaN(A)&&!isNaN(e)?(i=A,k=e):l&&l.style&&(l=f.getComputedStyle(l),"visible"!=l.overflow&&(i+="none"!=l.borderLeftStyle?n(b,l.borderLeftWidth):0,k+="none"!=l.borderTopStyle?n(b,l.borderTopWidth):0))}else if((a("opera")||8==a("ie")&&!a("quirks"))&&l)l=f.getComputedStyle(l),i-="none"!=l.borderLeftStyle?n(b,l.borderLeftWidth):0,k-="none"!=l.borderTopStyle?n(b,l.borderTopWidth):0;return{l:i,t:k,w:b.offsetWidth+c.w,h:b.offsetHeight+c.h}};h.getContentBox=function(b,
d){var b=g.byId(b),e=d||f.getComputedStyle(b),c=b.clientWidth,i=h.getPadExtents(b,e),k=h.getBorderExtents(b,e);c?(e=b.clientHeight,k.w=k.h=0):(c=b.offsetWidth,e=b.offsetHeight);a("opera")&&(i.l+=k.l,i.t+=k.t);return{l:i.l,t:i.t,w:c-i.w-k.w,h:e-i.h-k.h}};h.setContentSize=function(b,a,c){var b=g.byId(b),f=a.w,a=a.h;e(b)&&(c=h.getPadBorderExtents(b,c),0<=f&&(f+=c.w),0<=a&&(a+=c.h));i(b,NaN,NaN,f,a)};var l={l:0,t:0,w:0,h:0};h.setMarginBox=function(b,d,c){var b=g.byId(b),m=c||f.getComputedStyle(b),c=d.w,
u=d.h,o=e(b)?l:h.getPadBorderExtents(b,m),m=h.getMarginExtents(b,m);if(a("webkit")&&k(b)){var q=b.style;if(0<=c&&!q.width)q.width="4px";if(0<=u&&!q.height)q.height="4px"}0<=c&&(c=Math.max(c-o.w-m.w,0));0<=u&&(u=Math.max(u-o.h-m.h,0));i(b,d.l,d.t,c,u)};h.isBodyLtr=function(b){b=b||c.doc;return"ltr"==(c.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};h.docScroll=function(b){var b=b||c.doc,d=c.doc.parentWindow||c.doc.defaultView;return"pageXOffset"in d?{x:d.pageXOffset,y:d.pageYOffset}:(d=
a("quirks")?c.body(b):b.documentElement)&&{x:h.fixIeBiDiScrollLeft(d.scrollLeft||0,b),y:d.scrollTop||0}};if(a("ie"))h.getIeDocumentElementOffset=function(b){b=b||c.doc;b=b.documentElement;if(8>a("ie")){var d=b.getBoundingClientRect(),e=d.left,d=d.top;7>a("ie")&&(e+=b.clientLeft,d+=b.clientTop);return{x:0>e?0:e,y:0>d?0:d}}return{x:0,y:0}};h.fixIeBiDiScrollLeft=function(b,d){var d=d||c.doc,e=a("ie");if(e&&!h.isBodyLtr(d)){var f=a("quirks"),g=f?c.body(d):d.documentElement,i=c.global;6==e&&!f&&i.frameElement&&
g.scrollHeight>g.clientHeight&&(b+=g.clientLeft);return 8>e||f?b+g.clientWidth-g.scrollWidth:-b}return b};h.position=function(b,d){var b=g.byId(b),e=c.body(b.ownerDocument),f=b.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-f.left,h:f.bottom-f.top};if(9>a("ie")){var i=h.getIeDocumentElementOffset(b.ownerDocument);f.x-=i.x+(a("quirks")?e.clientLeft+e.offsetLeft:0);f.y-=i.y+(a("quirks")?e.clientTop+e.offsetTop:0)}d&&(e=h.docScroll(b.ownerDocument),f.x+=e.x,f.y+=e.y);return f};h.getMarginSize=
function(b,a){var b=g.byId(b),e=h.getMarginExtents(b,a||f.getComputedStyle(b)),c=b.getBoundingClientRect();return{w:c.right-c.left+e.w,h:c.bottom-c.top+e.h}};h.normalizeEvent=function(b){if(!("layerX"in b))b.layerX=b.offsetX,b.layerY=b.offsetY};return h})},"dojo/domReady":function(){define(["./has"],function(){function a(b){k?b(g):e.push(b)}var c=this,g=document,f={loaded:1,complete:1},i="string"!=typeof g.readyState,k=!!f[g.readyState];if(i)g.readyState="loading";if(!k){var e=[],h=[],l=function(b){b=
b||c.event;if(!(k||"readystatechange"==b.type&&!f[g.readyState])){k=1;if(i)g.readyState="complete";for(;e.length;)e.shift()(g)}},b=function(b,a){b.addEventListener(a,l,!1);e.push(function(){b.removeEventListener(a,l,!1)})};b(g,"DOMContentLoaded");b(c,"load");"onreadystatechange"in g?b(g,"readystatechange"):i||h.push(function(){return f[g.readyState]});if(h.length){var d=function(){if(!k){for(var b=h.length;b--;)if(h[b]()){l("poller");return}setTimeout(d,30)}};d()}}a.load=function(b,e,d){a(d)};return a})},
"frozen/ResourceManager":function(){define("frozen/ResourceManager",["./sounds/Sound!","dcl","dcl/bases/Mixer","dojo/_base/lang","dojo/on"],function(a,c,g,f,i){function k(a,c){var f=c;a&&(f=[a,c].join("/"));return f.replace(/\/{2,}/g,"/")}return c(g,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,resourceList:{},loadImage:function(a){var c=!1;if(!Array.isArray(a))if("string"===typeof a)c=!0,a=[a];else if("object"!==typeof a)return;for(var g in a)if(a.hasOwnProperty(g)){var b=
k(this.imageDir,a[g]);if(this.resourceList[b])a[g]=this.resourceList[b].img;else{this.allLoaded=!1;var d=new Image,j={name:b,img:d,complete:!1},m=f.partial(function(b){b.complete=!0},j);i(d,"load",m);d.src=b;this.resourceList[b]=j;a[g]=d}}return c?a[0]:a},loadSound:function(e){var c=!1;if(!Array.isArray(e))if("string"===typeof e)c=!0,e=[e];else if("object"!==typeof e)return;for(var f in e)if(e.hasOwnProperty(f)){var b=k(this.soundDir,e[f]);if(this.resourceList[b])e[f]=this.resourceList[b];else{this.allLoaded=
!1;var d=new a(b);this.resourceList[b]=d;e[f]=d}}return c?e[0]:e},playSound:function(a,c,f,b){a&&(c?a.loop(b):a.play(b,f||0))},resourcesReady:function(){if(!this.allLoaded){for(var a in this.resourceList)if(!this.resourceList[a].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var a=0,c=0,f;for(f in this.resourceList){var b=this.resourceList[f];c++;b.complete&&(a+=1)}return 0===c?0:Math.round(100*(a/c))}})})},"frozen/sounds/Sound":function(){define(["require","dojo/has",
"../shims/AudioContext"],function(a,c){c.add("WebAudio",function(a){return!!a.AudioContext});return{load:function(g,f,i){a([c("WebAudio")?"./WebAudio":"./HTML5Audio"],function(a){i(a)})}}})},"frozen/shims/AudioContext":function(){define("frozen/shims/AudioContext",function(){for(var a=["ms","moz","webkit","o"],c=0;c<a.length&&!window.AudioContext;++c)window.AudioContext=window[a[c]+"AudioContext"]})},"frozen/shims/RAF":function(){define("frozen/shims/RAF",function(){for(var a=0,c=["ms","moz","webkit",
"o"],g=0;g<c.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[c[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[g]+"CancelAnimationFrame"]||window[c[g]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(c){var g=(new Date).getTime(),k=Math.max(0,16-(g-a)),e=window.setTimeout(function(){c(g+k)},k);a=g+k;return e};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(a){clearTimeout(a)}})},
"frozen/box2d/CircleEntity":function(){define("frozen/box2d/CircleEntity",["dcl","dcl/bases/Mixer","./Entity","../utils/distance"],function(a,c,g,f){return a([c,g],{radius:1,draw:a.superCall(function(a){return function(c,e){var e=e||this.scale||1,f=c.lineWidth;c.lineWidth=this.lineWidth;c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.arc(this.x*e,this.y*e,this.radius*e,0,2*Math.PI,!0);c.closePath();c.fill();c.stroke();this.staticBody||(c.save(),c.translate(this.x*e,this.y*
e),c.rotate(this.angle),c.translate(-this.x*e,-this.y*e),c.beginPath(),c.moveTo(this.x*e,this.y*e),c.lineTo(this.x*e,this.y*e-this.radius*e),c.closePath(),c.stroke(),c.restore());c.lineWidth=f;a.apply(this,[c,e])}}),scaleShape:a.superCall(function(a){return function(c){this.radius*=c;a.apply(this,[c])}}),pointInShape:function(a){return f(a,this)<=this.radius}})})},"frozen/box2d/Entity":function(){define("frozen/box2d/Entity",["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,c,g){return a(c,{id:0,
x:0,y:0,scale:null,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,angularVelocity:0,angularDamping:0,staticBody:!1,fillStyle:"rgba(128,128,128,0.5)",strokeStyle:"#000",lineWidth:1,hidden:!1,maskBits:null,categoryBits:null,groupIndex:null,update:function(a){g.mixin(this,a)},draw:function(a,c){var c=c||this.scale||1,g=a.lineWidth;a.lineWidth=this.lineWidth;a.fillStyle=this.strokeStyle;a.beginPath();a.arc(this.x*c,this.y*c,4,0,2*Math.PI,!0);a.closePath();
a.fill();if(this.center)a.fillStyle="yellow",a.beginPath(),a.arc(this.center.x*c,this.center.y*c,2,0,2*Math.PI,!0),a.closePath(),a.fill();a.lineWidth=g},scaleShape:function(a){this.x*=a;this.y*=a;this.alreadyScaled=!0}})})},"frozen/utils/distance":function(){define("frozen/utils/distance",function(){return function(a,c){return Math.sqrt((c.x-a.x)*(c.x-a.x)+(c.y-a.y)*(c.y-a.y))}})},"frozen/box2d/PolygonEntity":function(){define("frozen/box2d/PolygonEntity","dcl,dcl/bases/Mixer,./Entity,../utils/scalePoints,../utils/pointInPolygon,../utils/translatePoints".split(","),
function(a,c,g,f,i,k){return a([c,g],{points:[],draw:a.superCall(function(a){return function(c,f){var f=f||this.scale||1,b=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*f,this.y*f);c.rotate(this.angle);c.translate(-this.x*f,-this.y*f);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.moveTo((this.x+this.points[0].x)*f,(this.y+this.points[0].y)*f);for(var d=1;d<this.points.length;d++)c.lineTo((this.points[d].x+this.x)*f,(this.points[d].y+this.y)*f);c.lineTo((this.x+
this.points[0].x)*f,(this.y+this.points[0].y)*f);c.closePath();c.fill();c.stroke();c.restore();c.lineWidth=b;a.apply(this,[c,f])}}),scaleShape:a.superCall(function(a){return function(c){this.points=f(this.points,c);a.apply(this,[c])}}),pointInShape:function(a){return i(a,k(this.points,this))}})})},"frozen/utils/scalePoints":function(){define("frozen/utils/scalePoints",function(){function a(c,g){if(Array.isArray(c)){var f=[];c.forEach(function(c){f.push(a(c,g))});c=f}else c="object"===typeof g?{x:c.x*
g.x,y:c.y*g.y}:{x:c.x*g,y:c.y*g};return c}return a})},"frozen/utils/pointInPolygon":function(){define("frozen/utils/pointInPolygon",function(){return function(a,c){if(!a||!c)return!1;for(var g=c.points||c,f=!1,i=g.length-1,k=0;k<g.length;i=k++){var e=g[k].x,h=g[k].y,l=g[i].x,i=g[i].y;h>a.y!==i>a.y&&a.x<(l-e)*(a.y-h)/(i-h)+e&&(f=!f)}return f}})},"frozen/utils/translatePoints":function(){define("frozen/utils/translatePoints",function(){function a(c,g){if(Array.isArray(c)){var f=[];c.forEach(function(c){f.push(a(c,
g))});c=f}else c={x:c.x,y:c.y},null!=g.x&&(c.x+=g.x),null!=g.y&&(c.y+=g.y);return c}return a})},"frozen/box2d/MultiPolygonEntity":function(){define("frozen/box2d/MultiPolygonEntity","dcl,dcl/bases/Mixer,./Entity,../utils/scalePoints,../utils/pointInPolygon,../utils/translatePoints".split(","),function(a,c,g,f,i,k){return a([c,g],{polys:[],draw:a.superCall(function(a){return function(c,f){var f=f||this.scale||1,b=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*f,this.y*f);c.rotate(this.angle);
c.translate(-this.x*f,-this.y*f);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;for(var d=0;d<this.polys.length;d++){c.beginPath();c.moveTo((this.x+this.polys[d][0].x)*f,(this.y+this.polys[d][0].y)*f);for(var g=1;g<this.polys[d].length;g++)c.lineTo((this.polys[d][g].x+this.x)*f,(this.polys[d][g].y+this.y)*f);c.lineTo((this.x+this.polys[d][0].x)*f,(this.y+this.polys[d][0].y)*f);c.closePath();c.fill();c.stroke()}c.restore();c.lineWidth=b;a.apply(this,[c,f])}}),scaleShape:a.superCall(function(a){return function(c){this.polys=
f(this.polys,c);a.apply(this,[c])}}),pointInShape:function(a){for(var c=0;c<this.polys.length;c++)if(i(a,k(this.polys[c],this)))return!0;return!1}})})},"frozen/box2d/RectangleEntity":function(){define("frozen/box2d/RectangleEntity",["dcl","dcl/bases/Mixer","./Entity"],function(a,c,g){return a([c,g],{halfWidth:1,halfHeight:1,draw:a.superCall(function(a){return function(c,g){var g=g||this.scale||1,e=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*g,this.y*g);c.rotate(this.angle);
c.translate(-this.x*g,-this.y*g);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.fillRect((this.x-this.halfWidth)*g,(this.y-this.halfHeight)*g,2*this.halfWidth*g,2*this.halfHeight*g);c.strokeRect((this.x-this.halfWidth)*g,(this.y-this.halfHeight)*g,2*this.halfWidth*g,2*this.halfHeight*g);c.restore();c.lineWidth=e;a.apply(this,[c,g])}}),scaleShape:a.superCall(function(a){return function(c){this.halfHeight*=c;this.halfWidth*=c;a.apply(this,[c])}}),pointInShape:function(a){return a.x>=this.x-
this.halfWidth&&a.x<=this.x+this.halfWidth&&a.y>=this.y-this.halfHeight&&a.y<=this.y+this.halfHeight}})})},"frozen/box2d/joints/Joint":function(){define("frozen/box2d/joints/Joint",["dcl","dcl/bases/Mixer"],function(a,c){return a(c,{bodyId1:null,bodyId2:null,bodyPoint1:null,jointAttributes:null,scaleJointLocation:function(a){if(a&&this.bodyPoint1)this.bodyPoint1.x*=a,this.bodyPoint1.y*=a,this.alreadyScaled=!0}})})},"frozen/box2d/joints/Revolute":function(){define("frozen/box2d/joints/Revolute",["dcl",
"dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(a,c,g,f){var i=Box2D.Common.Math.b2Vec2,k=Box2D.Dynamics.Joints.b2RevoluteJointDef;return a([c,f],{createB2Joint:function(a){if(a&&a.bodiesMap&&a.b2World&&a.jointsMap&&!a.jointsMap[this.id]){var c=a.bodiesMap[this.bodyId1],f=a.bodiesMap[this.bodyId2];if(c&&f){var b;this.bodyPoint1&&(b=new i(this.bodyPoint1.x,this.bodyPoint1.y));b=b||c.GetWorldCenter();var d=new k;d.Initialize(c,f,b,void 0);this.jointAttributes&&g.mixin(d,this.jointAttributes);
return a.b2World.CreateJoint(d)}}}})})},"frozen/box2d/joints/Distance":function(){define("frozen/box2d/joints/Distance",["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(a,c,g,f){var i=Box2D.Common.Math.b2Vec2,k=Box2D.Dynamics.Joints.b2DistanceJointDef;return a([c,f],{bodyPoint2:null,scaleJointLocation:a.superCall(function(a){return function(c){if(c&&this.bodyPoint2)this.bodyPoint2.x*=c,this.bodyPoint2.y*=c,this.alreadyScaled=!0;a.apply(this,[c])}}),createB2Joint:function(a){if(a&&a.bodiesMap&&
a.b2World&&a.jointsMap&&!a.jointsMap[this.id]){var c=a.bodiesMap[this.bodyId1],f=a.bodiesMap[this.bodyId2];if(c&&f){var b,d;this.bodyPoint1&&(b=new i(this.bodyPoint1.x,this.bodyPoint1.y));this.bodyPoint2&&(d=new i(this.bodyPoint2.x,this.bodyPoint2.y));b=b||c.GetWorldCenter();d=d||f.GetWorldCenter();var j=new k;j.Initialize(c,f,b,d);this.jointAttributes&&g.mixin(j,this.jointAttributes);return a.b2World.CreateJoint(j)}}}})})},"frozen/box2d/joints/Prismatic":function(){define("frozen/box2d/joints/Prismatic",
["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(a,c,g,f){var i=Box2D.Common.Math.b2Vec2,k=Box2D.Dynamics.Joints.b2PrismaticJointDef;return a([c,f],{axisScale:null,createB2Joint:function(a){if(a&&a.bodiesMap&&a.b2World&&a.jointsMap&&!a.jointsMap[this.id]){var c=a.bodiesMap[this.bodyId1],f=a.bodiesMap[this.bodyId2];if(c&&f){var b;this.bodyPoint1&&(b=new i(this.bodyPoint1.x,this.bodyPoint1.y));b=b||c.GetWorldCenter();var d=new k,j;j=this.axisScale?new i(this.axisScale.x,this.axisScale.y):
new i(1,0);d.Initialize(c,f,b,j);this.jointAttributes&&g.mixin(d,this.jointAttributes);return a.b2World.CreateJoint(d)}}}})})},"frozen/reiner/Creature":function(){define("frozen/reiner/Creature",["dcl","dcl/bases/Mixer","dojo/_base/lang","../Sprite","../Animation"],function(a,c,g,f,i){return a([c,f],{statics:{EAST:0,NORTH:1,NORTHEAST:2,NORTHWEST:3,SOUTH:4,SOUTHEAST:5,SOUTHWEST:6,WEST:7,STATE_WALKING:0,STATE_DYING:1,STATE_IDLE:2},state:0,walkingAnims:[],dyingAnims:[],idleAnims:[],direction:0,constructor:function(){this.state=
this.statics.STATE_IDLE;this.direction=this.statics.EAST},update:function(a){this.x+=this.dx*a;this.y+=this.dy*a;if(this.state!==this.statics.STATE_DYING){if(0<this.dx&&0===this.dy)this.direction=this.statics.EAST;else if(0===this.dx&&0>this.dy)this.direction=this.statics.NORTH;else if(0<this.dx&&0>this.dy)this.direction=this.statics.NORTHEAST;else if(0>this.dx&&0>this.dy)this.direction=this.statics.NORTHWEST;else if(0===this.dx&&0<this.dy)this.direction=this.statics.SOUTH;else if(0<this.dx&&0<this.dy)this.direction=
this.statics.SOUTHEAST;else if(0>this.dx&&0<this.dy)this.direction=this.statics.SOUTHWEST;else if(0>this.dx&&0===this.dy)this.direction=this.statics.WEST;this.state=0===this.dx&&0===this.dy?this.statics.STATE_IDLE:this.statics.STATE_WALKING}this.anim=this.state===this.statics.STATE_WALKING?this.walkingAnims[this.direction]:this.state===this.statics.STATE_DYING?this.dyingAnims[this.direction]:this.idleAnims[this.direction];this.anim.update(a)},createAnimations:function(a,c,f,l,b,d){var j=[],m=g.isArray(c),
u=1;d||(d=0);for(var o=0;8>o;o++){j[o]=new i({height:l,width:b,image:f});for(var q=0;q<a;q++)u=m?c[q]:c,j[o].addFrame(u,q+a*o,d)}return j}})})},"frozen/Sprite":function(){define("frozen/Sprite",["dcl","dcl/bases/Mixer"],function(a,c){var g=a(c,{x:0,y:0,dx:0,dy:0,name:null,collisionRadius:40,update:function(a){this.x+=this.dx*a;this.y+=this.dy*a;this.anim.update(a)},getX:function(){return this.x},getY:function(){return this.y},setX:function(a){this.x=a},setY:function(a){this.y=a},getWidth:function(){return this.anim.width},
getHeight:function(){return this.anim.height},getVelocityX:function(){return this.dx},getVelocityY:function(){return this.dy},setVelocityX:function(a){this.dx=this.limitSpeed(a)},setVelocityY:function(a){this.dy=this.limitSpeed(a)},limitSpeed:function(a){return this.getMaxSpeed()?Math.abs(a)>this.getMaxSpeed()?0<a?this.getMaxSpeed():0>a?this.getMaxSpeed():0:a:a},getMaxSpeed:function(){return this.maxSpeed},getCurrentFrame:function(){if(this.anim)return this.anim.getCurrentFrame()},drawCurrentFrame:function(a){var c=
this.anim.getCurrentFrame();a.drawImage(this.anim.image,c.imgSlotX*this.anim.width,c.imgSlotY*this.anim.height,this.anim.width,this.anim.height,this.x,this.y,this.anim.width,this.anim.height)},draw:function(a){this.anim&&this.anim.draw(a,this.x,this.y)},clone:function(){return new g({anim:this.anim.clone()})}});return g})},"frozen/Animation":function(){define("frozen/Animation",["./AnimFrame","dcl","dcl/bases/Mixer"],function(a,c,g){var f=c(g,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,
width:64,image:null,offsetX:0,offsetY:0,constructor:function(){this.start()},createFromTile:function(a,c,e,f,g,b){return this.createFromSheet(a,c,e,g,f,b)},createFromSheet:function(a,c,e,g,l,b){e=new f({image:e,height:l,width:g});g=Array.isArray(c);l=1;b||(b=0);for(var d=0;d<a;d++)l=g?c[d]:c,e.addFrame(l,d,b);return e},clone:function(){return new f({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(c,f,e){if(!this.frames)this.frames=[];this.totalDuration+=c;
this.frames.push(new a({endTime:this.totalDuration,image:this.image,imgSlotX:f,imgSlotY:e}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(a){if(1<this.frames.length){this.animTime+=a;if(this.animTime>=this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.getFrame(this.currFrameIndex).endTime;)this.currFrameIndex++}},getImage:function(){return this.image},getFrame:function(a){return this.frames[a]},getCurrentFrame:function(){return 0===
this.frames.length?null:this.getFrame(this.currFrameIndex)},draw:function(a,c,e){var f=this.getCurrentFrame();a.drawImage(this.image,f.imgSlotX*this.width+this.offsetX,f.imgSlotY*this.height+this.offsetY,this.width,this.height,c,e,this.width,this.height)}});return f})},"frozen/AnimFrame":function(){define("frozen/AnimFrame",["dcl","dcl/bases/Mixer"],function(a,c){return a(c,{endTime:0,imgSlotX:0,imgSlotY:0,image:null})})},"frozen/utils":function(){define("frozen/utils","./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints,./utils/insideCanvas".split(","),
function(a,c,g,f,i,k,e,h,l,b){return{averagePoints:a,degreesToRadians:c,radiansToDegrees:g,pointInPolygon:f,distance:i,degreesFromCenter:k,radiansFromCenter:e,scalePoints:h,translatePoints:l,insideCanvas:b}})},"frozen/utils/averagePoints":function(){define("frozen/utils/averagePoints",function(){return function(a){var c={x:0,y:0};a.forEach(function(a){c.x+=a.x;c.y+=a.y});c.x/=a.length;c.y/=a.length;return c}})},"frozen/utils/degreesToRadians":function(){define("frozen/utils/degreesToRadians",function(){var a=
Math.PI/180;return function(c){return c*a}})},"frozen/utils/radiansToDegrees":function(){define("frozen/utils/radiansToDegrees",function(){var a=180/Math.PI;return function(c){return c*a}})},"frozen/utils/degreesFromCenter":function(){define("frozen/utils/degreesFromCenter",["./radiansToDegrees","./radiansFromCenter"],function(a,c){return function(g,f){return a(c(g,f))}})},"frozen/utils/radiansFromCenter":function(){define("frozen/utils/radiansFromCenter",function(){var a={x:0,y:0};return function(c,
g){c=c||a;return c.x===g.x&&c.y===g.y?0:c.x===g.x?c.y>g.y?0:Math.PI:c.y===g.y?c.x>g.x?1.5*Math.PI:Math.PI/2:c.x<g.x&&c.y>g.y?Math.atan((g.x-c.x)/(c.y-g.y)):c.x<g.x&&c.y<g.y?Math.PI/2+Math.atan((g.y-c.y)/(g.x-c.x)):c.x>g.x&&c.y<g.y?Math.PI+Math.atan((c.x-g.x)/(g.y-c.y)):1.5*Math.PI+Math.atan((c.y-g.y)/(c.x-g.x))}})},"frozen/utils/parseString":function(){define("frozen/utils/parseString",function(){return function(a){0===a.indexOf("{")&&a.lastIndexOf("}")===a.length-1?a=JSON.parse(a.replace(/,/g,'","').replace(/:(?!\/\/)/g,
'":"').replace(/\{/,'{"').replace(/\}/,'"}')):0===a.indexOf("[")&&a.lastIndexOf("]")===a.length-1&&(a=JSON.parse(a.replace(/,/g,'","').replace(/\[/g,'["').replace(/\]/g,'"]')));return a}})},"frozen/sounds/WebAudio":function(){define("frozen/sounds/WebAudio",["dcl","dojo/on","dojo/_base/lang"],function(a,c,g){var f=null;window.AudioContext&&(f=new window.AudioContext);return a(null,{declaredClass:"frozen/sounds/WebAudio",name:null,complete:!1,audioContext:f,buffer:null,constructor:function(a){"string"===
typeof a&&this.load(a)},load:function(a){this.name=a;var f=g.partial(function(a){a.audioContext.decodeAudioData(this.response,function(c){a.buffer=c;a.complete=!0},function(){})},this),e=new XMLHttpRequest;e.open("GET",a,!0);e.responseType="arraybuffer";c(e,"load",f);e.send()},loop:function(a){this._initAudio(a,!0).noteOn(0)},play:function(a,c){this._initAudio(a,!1).noteOn(c||0)},_initAudio:function(a,c){var c="boolean"===typeof c?c:!1,e=this.audioContext.createBufferSource();e.buffer=this.buffer;
e.loop=c;if(a){var f=this.audioContext.createGainNode();f.gain.value=a;e.connect(f);f.connect(this.audioContext.destination)}else e.connect(this.audioContext.destination);return e}})})},"frozen/sounds/HTML5Audio":function(){define("frozen/sounds/HTML5Audio",["dcl","dojo/on","dojo/_base/lang"],function(a,c,g){return a(null,{declaredClass:"frozen/sounds/HTML5Audio",name:null,complete:!1,audio:null,constructor:function(a){this.audio=new Audio;"string"===typeof a&&this.load(a)},load:function(a){this.name=
a;this.audio.pause();this.audio.preload="auto";this.audio.src=a;c(this.audio,"loadeddata",g.hitch(this,function(){this.complete=!0}))},loop:function(a){var g=this._initAudio(a,!0);c(g,"loadeddata",function(){g.play()})},play:function(a,g){var g=g||0,k=this._initAudio(a,!1);c(k,"loadeddata",function(){k.currentTime=g/1E3;k.play()})},_initAudio:function(a,c){var c="boolean"===typeof c?c:!1,g=new Audio;g.pause();g.volume=a||1;g.loop=c;g.preload="auto";g.mozLoadFrom?g.mozLoadFrom(this.audio):g.src=this.name;
return g}})})},"frozen/plugins/loadImage":function(){define(["../ResourceManager","../utils/parseString"],function(a,c){var g=new a;return{load:function(a,i,k){a=c(a);a=g.loadImage(a);k(a)}}})},"frozen/plugins/loadSound":function(){define(["../ResourceManager","../utils/parseString"],function(a,c){var g=new a;return{load:function(a,i,k){a=c(a);a=g.loadSound(a);k(a)}}})},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./sniff"],function(a,c){return a.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,
SHIFT:16,CTRL:17,ALT:18,META:c("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,
F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:c("mac")&&!c("air")?c("safari")?91:224:17}})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();